<!DOCTYPE html>
<html lang="en"><head>
<script src="part-I_files/libs/clipboard/clipboard.min.js"></script>
<script src="part-I_files/libs/quarto-html/tabby.min.js"></script>
<script src="part-I_files/libs/quarto-html/popper.min.js"></script>
<script src="part-I_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="part-I_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="part-I_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="part-I_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="part-I_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.550">

  <title>Tidymodeling</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="part-I_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="part-I_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="part-I_files/libs/revealjs/dist/theme/quarto.css">
  <link href="part-I_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="part-I_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="part-I_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="part-I_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="part-I_files/libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="part-I_files/libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Tidymodeling</h1>
  <p class="subtitle">Part I</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="running-example-part-i-the-whole-game" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>
<ul>
<li>Minimal version of predictive modeling process</li>
<li>Feature engineering and tuning as iterative extensions</li>
</ul>
<div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-1" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-split.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-2" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-model-n.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-3" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-resamples.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-4" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-select.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-5" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-final-fit.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="running-example-part-i-the-whole-game-6" class="slide level2">
<h2>Running Example Part I: The Whole Game</h2>

<img data-src="images/whole-game-final-performance.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section>
<section id="open-worksheet-1" class="title-slide slide level1 center">
<h1>Open Worksheet 1 üìÑ</h1>
<div class="footer">

</div>
</section>
<section id="data-on-forests-in-washington" class="slide level2">
<h2>Data on forests in Washington</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>The U.S. Forest Service maintains ML models to predict whether a plot of land is ‚Äúforested.‚Äù</li>
<li>This classification is important for all sorts of research, legislation, and land management purposes.</li>
<li>Plots are typically remeasured every 10 years and this dataset contains the most recent measurement per plot.</li>
<li>Type <code>?forested</code> to learn more about this dataset, including references.</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="images/forest_mountain.svg"></p>
</div>
</div>
<div class="footer">
<p>Credit: <a href="https://www.svgrepo.com/svg/251793/forest-mountain" class="uri">https://www.svgrepo.com/svg/251793/forest-mountain</a></p>
</div>
</section>
<section id="data-on-forests-in-washington-1" class="slide level2">
<h2>Data on forests in Washington</h2>
<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li><code>N = 7,107</code> plots of land, one from each of 7,107 6000-acre hexagons in WA.</li>
<li>A nominal outcome, <code>forested</code>, with levels <code>"Yes"</code> and <code>"No"</code>, measured ‚Äúon-the-ground.‚Äù</li>
<li>18 remotely-sensed and easily-accessible predictors:
<ul>
<li><strong>numeric</strong> variables based on weather and topography.</li>
<li><strong>nominal</strong> variables based on classifications from other governmental orgs.</li>
</ul></li>
</ul>
</div><aside class="notes">
<ul>
<li>Those nominal variables are classifications similar to ‚Äúforested‚Äù but from other agencies. e.g.&nbsp;<code>land_type</code> is from the European Space Agency, and is a remotely-sensed 3-class distribution based on predictions for how the land is used.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside><div class="column" style="width:30%;">
<p><img data-src="images/forest.svg"></p>
</div>
</div>
<div class="footer">
<p>Credit: <a href="https://www.svgrepo.com/svg/67614/forest" class="uri">https://www.svgrepo.com/svg/67614/forest</a></p>
</div>
</section>
<section id="checklist-for-predictors" class="slide level2">
<h2>Checklist for predictors</h2>
<ul>
<li><p>Is it ethical to use this variable? (Or even legal?)</p></li>
<li><p>Will this variable be available at prediction time?</p></li>
<li><p>Does this variable contribute to explainability?</p></li>
</ul>
<aside class="notes">
<ul>
<li>re: ethics ‚Äì what issues might arise from releasing the true <code>lat</code> and <code>lon</code>? In reality, these <code>lat</code> and <code>lon</code> are slightly jittered to help ensure trust with landowners who allow surveyers to come take measurements.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="data-on-forests-in-washington-2" class="slide level2">
<h2>Data on forests in Washington</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-2"><a href=""></a><span class="fu">library</span>(forested)</span>
<span id="cb1-3"><a href=""></a></span>
<span id="cb1-4"><a href=""></a>forested</span>
<span id="cb1-5"><a href=""></a><span class="co">#&gt; # A tibble: 7,107 √ó 19</span></span>
<span id="cb1-6"><a href=""></a><span class="co">#&gt;    forested  year elevation eastness northness roughness tree_no_tree dew_temp</span></span>
<span id="cb1-7"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb1-8"><a href=""></a><span class="co">#&gt;  1 Yes       2005       881       90        43        63 Tree             0.04</span></span>
<span id="cb1-9"><a href=""></a><span class="co">#&gt;  2 Yes       2005       113      -25        96        30 Tree             6.4 </span></span>
<span id="cb1-10"><a href=""></a><span class="co">#&gt;  3 No        2005       164      -84        53        13 Tree             6.06</span></span>
<span id="cb1-11"><a href=""></a><span class="co">#&gt;  4 Yes       2005       299       93        34         6 No tree          4.43</span></span>
<span id="cb1-12"><a href=""></a><span class="co">#&gt;  5 Yes       2005       806       47       -88        35 Tree             1.06</span></span>
<span id="cb1-13"><a href=""></a><span class="co">#&gt;  6 Yes       2005       736      -27       -96        53 Tree             1.35</span></span>
<span id="cb1-14"><a href=""></a><span class="co">#&gt;  7 Yes       2005       636      -48        87         3 No tree          1.42</span></span>
<span id="cb1-15"><a href=""></a><span class="co">#&gt;  8 Yes       2005       224      -65       -75         9 Tree             6.39</span></span>
<span id="cb1-16"><a href=""></a><span class="co">#&gt;  9 Yes       2005        52      -62        78        42 Tree             6.5 </span></span>
<span id="cb1-17"><a href=""></a><span class="co">#&gt; 10 Yes       2005      2240      -67       -74        99 No tree         -5.63</span></span>
<span id="cb1-18"><a href=""></a><span class="co">#&gt; # ‚Ñπ 7,097 more rows</span></span>
<span id="cb1-19"><a href=""></a><span class="co">#&gt; # ‚Ñπ 11 more variables: precip_annual &lt;dbl&gt;, temp_annual_mean &lt;dbl&gt;,</span></span>
<span id="cb1-20"><a href=""></a><span class="co">#&gt; #   temp_annual_min &lt;dbl&gt;, temp_annual_max &lt;dbl&gt;, temp_january_min &lt;dbl&gt;,</span></span>
<span id="cb1-21"><a href=""></a><span class="co">#&gt; #   vapor_min &lt;dbl&gt;, vapor_max &lt;dbl&gt;, canopy_cover &lt;dbl&gt;, lon &lt;dbl&gt;, lat &lt;dbl&gt;,</span></span>
<span id="cb1-22"><a href=""></a><span class="co">#&gt; #   land_type &lt;fct&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="data-splitting-and-spending" class="slide level2 annotation">
<h2>Data splitting and spending</h2>
<p>For machine learning, we typically split data into training and test sets:</p>
<div class="fragment">
<ul>
<li>The <strong>training set</strong> is used to estimate model parameters.</li>
<li>The <strong>test set</strong> is used to find an independent assessment of model performance.</li>
</ul>
</div>
<div class="fragment">
<p>Do not üö´ use the test set during training.</p>
<div class="footer">

</div>
</div>
</section>
<section id="data-splitting-and-spending-1" class="slide level2">
<h2>Data splitting and spending</h2>

<img data-src="part-I_files/figure-revealjs/test-train-split-1.svg" width="1152" class="r-stretch"><div class="footer">

</div>
</section></section>
<section>
<section id="the-more-data-we-spend-the-better-estimates-well-get." class="title-slide slide level1 center">
<h1>The more data<br>we spend ü§ë<br><br>the better estimates<br>we‚Äôll get.</h1>
<div class="footer">

</div>
</section>
<section id="data-splitting-and-spending-2" class="slide level2">
<h2>Data splitting and spending</h2>
<ul>
<li>Spending too much data in <strong>training</strong> prevents us from computing a good assessment of predictive <strong>performance</strong>.</li>
</ul>
<div class="fragment">
<ul>
<li>Spending too much data in <strong>testing</strong> prevents us from computing a good estimate of model <strong>parameters</strong>.</li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="your-turn" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>When is a good time to split your data?</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="when-to-split" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section></section>
<section>
<section id="the-testing-data-is-precious" class="title-slide slide level1 center">
<h1>The testing data is precious üíé</h1>
<div class="footer">

</div>
</section>
<section id="the-initial-split" class="slide level2">
<h2>The initial split <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb2-2"><a href=""></a>forested_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(forested)</span>
<span id="cb2-3"><a href=""></a>forested_split</span>
<span id="cb2-4"><a href=""></a><span class="co">#&gt; &lt;Training/Testing/Total&gt;</span></span>
<span id="cb2-5"><a href=""></a><span class="co">#&gt; &lt;5330/1777/7107&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function uses a good default, but this depends on your specific goal/data</p>
<div class="footer">

</div>
</section>
<section id="what-is-set.seed" class="slide level2 annotation">
<h2>What is <code>set.seed()</code>?</h2>
<p>To create that split of the data, R generates ‚Äúpseudo-random‚Äù numbers: while they are made to behave like random numbers, their generation is deterministic given a ‚Äúseed‚Äù.</p>
<p>This allows us to reproduce results by setting that seed.</p>
<p>Which seed you pick doesn‚Äôt matter, as long as you don‚Äôt try a bunch of seeds and pick the one that gives you the best performance.</p>
<div class="footer">

</div>
</section>
<section id="accessing-the-data" class="slide level2">
<h2>Accessing the data <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>forested_train <span class="ot">&lt;-</span> <span class="fu">training</span>(forested_split)</span>
<span id="cb3-2"><a href=""></a>forested_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(forested_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="the-training-set" class="slide level2">
<h2>The training set<img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>forested_train</span>
<span id="cb4-2"><a href=""></a><span class="co">#&gt; # A tibble: 5,330 √ó 19</span></span>
<span id="cb4-3"><a href=""></a><span class="co">#&gt;    forested  year elevation eastness northness roughness tree_no_tree dew_temp</span></span>
<span id="cb4-4"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb4-5"><a href=""></a><span class="co">#&gt;  1 No        2016       464       -5       -99         7 No tree          1.71</span></span>
<span id="cb4-6"><a href=""></a><span class="co">#&gt;  2 Yes       2016       166       92        37         7 Tree             6   </span></span>
<span id="cb4-7"><a href=""></a><span class="co">#&gt;  3 No        2016       644      -85       -52        24 No tree          0.67</span></span>
<span id="cb4-8"><a href=""></a><span class="co">#&gt;  4 Yes       2014      1285        4        99        79 Tree             1.91</span></span>
<span id="cb4-9"><a href=""></a><span class="co">#&gt;  5 Yes       2013       822       87        48        68 Tree             1.95</span></span>
<span id="cb4-10"><a href=""></a><span class="co">#&gt;  6 Yes       2017         3        6       -99         5 Tree             7.93</span></span>
<span id="cb4-11"><a href=""></a><span class="co">#&gt;  7 Yes       2014      2041      -95        28        49 Tree            -4.22</span></span>
<span id="cb4-12"><a href=""></a><span class="co">#&gt;  8 Yes       2015      1009       -8        99        72 Tree             1.72</span></span>
<span id="cb4-13"><a href=""></a><span class="co">#&gt;  9 No        2017       436      -98        19        10 No tree          1.8 </span></span>
<span id="cb4-14"><a href=""></a><span class="co">#&gt; 10 No        2018       775       63        76       103 No tree          0.62</span></span>
<span id="cb4-15"><a href=""></a><span class="co">#&gt; # ‚Ñπ 5,320 more rows</span></span>
<span id="cb4-16"><a href=""></a><span class="co">#&gt; # ‚Ñπ 11 more variables: precip_annual &lt;dbl&gt;, temp_annual_mean &lt;dbl&gt;,</span></span>
<span id="cb4-17"><a href=""></a><span class="co">#&gt; #   temp_annual_min &lt;dbl&gt;, temp_annual_max &lt;dbl&gt;, temp_january_min &lt;dbl&gt;,</span></span>
<span id="cb4-18"><a href=""></a><span class="co">#&gt; #   vapor_min &lt;dbl&gt;, vapor_max &lt;dbl&gt;, canopy_cover &lt;dbl&gt;, lon &lt;dbl&gt;, lat &lt;dbl&gt;,</span></span>
<span id="cb4-19"><a href=""></a><span class="co">#&gt; #   land_type &lt;fct&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="the-test-set" class="slide level2">
<h2>The test set <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>üôà</p>
<div class="fragment">
<p>There are 1777 rows and 19 columns in the test set.</p>
<div class="footer">

</div>
</div>
</section>
<section id="your-turn-1" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Split your data so 20% is held out for the test set.</em></p>
<p><em>Try out different values in <code>set.seed()</code> to see how the results change.</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="try-splitting" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="data-splitting-and-spending-3" class="slide level2">
<h2>Data splitting and spending <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p><em>Split your data so 20% is held out for the test set.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb5-2"><a href=""></a>forested_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(forested, <span class="at">prop =</span> <span class="fl">0.8</span>)</span>
<span id="cb5-3"><a href=""></a>forested_train <span class="ot">&lt;-</span> <span class="fu">training</span>(forested_split)</span>
<span id="cb5-4"><a href=""></a>forested_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(forested_split)</span>
<span id="cb5-5"><a href=""></a></span>
<span id="cb5-6"><a href=""></a><span class="fu">nrow</span>(forested_train)</span>
<span id="cb5-7"><a href=""></a><span class="co">#&gt; [1] 5685</span></span>
<span id="cb5-8"><a href=""></a><span class="fu">nrow</span>(forested_test)</span>
<span id="cb5-9"><a href=""></a><span class="co">#&gt; [1] 1422</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section></section>
<section>
<section id="exploratory-data-analysis" class="title-slide slide level1 center">
<h1>Exploratory data analysis üßê</h1>
<div class="footer">

</div>
</section>
<section id="your-turn-2" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Explore the <code>forested_train</code> data on your own!</em></p>
<ul>
<li><em>What‚Äôs the distribution of the outcome, <code>forested</code>?</em></li>
<li><em>What‚Äôs the distribution of numeric variables like <code>precip_annual</code>?</em></li>
<li><em>How does the distribution of <code>forested</code> differ across the categorical variables?</em></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="explore-forested" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<aside class="notes">
<p>Make a plot or summary and then share with neighbor</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>forested_train <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> forested)) <span class="sc">+</span></span>
<span id="cb6-3"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="part-I_files/figure-revealjs/forested-forested-counts-1.svg" class="quarto-figure quarto-figure-center r-stretch" width="960"><div class="footer">

</div>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>forested_train <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> forested, <span class="at">fill =</span> tree_no_tree)) <span class="sc">+</span></span>
<span id="cb7-3"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="part-I_files/figure-revealjs/forested-by-tree-no-tree-1.svg" class="quarto-figure quarto-figure-center r-stretch" width="960"><div class="footer">

</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a>forested_train <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> precip_annual, <span class="at">fill =</span> forested, <span class="at">group =</span> forested)) <span class="sc">+</span></span>
<span id="cb8-3"><a href=""></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">alpha =</span> .<span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="part-I_files/figure-revealjs/forested-by-precip-annual-1.svg" class="quarto-figure quarto-figure-center r-stretch" width="960"><div class="footer">

</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>forested_train <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> precip_annual, <span class="at">fill =</span> forested, <span class="at">group =</span> forested)) <span class="sc">+</span></span>
<span id="cb9-3"><a href=""></a>  <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="part-I_files/figure-revealjs/forested-by-precip-annual-fill-1.svg" class="quarto-figure quarto-figure-center r-stretch" width="960"><div class="footer">

</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>forested_train <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat, <span class="at">col =</span> forested)) <span class="sc">+</span></span>
<span id="cb10-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="part-I_files/figure-revealjs/forested-forested-by-lat-lon-1.svg" class="quarto-figure quarto-figure-center r-stretch" width="960"><div class="footer">

</div>
</section>
<section id="the-whole-game---status-update" class="slide level2">
<h2>The whole game - status update</h2>

<img data-src="images/whole-game-transparent-split.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section></section>
<section id="build-a-model" class="title-slide slide level1 center">
<h1>Build a model</h1>
<div class="footer">

</div>
</section>

<section>
<section id="open-worksheet-2" class="title-slide slide level1 center">
<h1>Open Worksheet 2 üìÑ</h1>
<div class="footer">

</div>
</section>
<section id="and-now-its-time-for" class="slide level2" data-transition="slide-in">
<h2>And now it‚Äôs time for‚Ä¶</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 350px; height: 350px; "></p>
<p><em>How do you fit a linear model in R?</em></p>
<p><em>How many different ways can you think of?</em></p>
<div class="fragment">
<ul>
<li><p><code>lm</code> for linear model</p></li>
<li><p><code>glmnet</code> for regularized regression</p></li>
<li><p><code>keras</code> for regression using TensorFlow</p></li>
<li><p><code>stan</code> for Bayesian regression</p></li>
<li><p><code>spark</code> for large data sets</p></li>
<li><p><code>brulee</code> for regression using torch</p></li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="to-specify-a-model" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Choose a <u>model</u></li>
<li>Specify an engine</li>
<li>Set the mode</li>
</ul>
</div><div class="column" style="width:40%;">
<p><br><br><br> <img data-src="images/forest_mountain.svg" class="absolute" style="height: 300px; "></p>
</div>
</div>
<aside class="notes">
<p>Models have default engines</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</div>
</section>
<section id="to-specify-a-model-1" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="fu">logistic_reg</span>()</span>
<span id="cb11-2"><a href=""></a><span class="co">#&gt; Logistic Regression Model Specification (classification)</span></span>
<span id="cb11-3"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb11-4"><a href=""></a><span class="co">#&gt; Computational engine: glm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-2" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Choose a model</li>
<li>Specify an <u>engine</u></li>
<li>Set the mode</li>
</ul>
</div><div class="column" style="width:40%;">
<p><br><br><br> <img data-src="images/forest_mountain.svg" class="absolute" style="height: 300px; "></p>
</div>
</div>
<p><br><br></p>
<p><br><br></p>
<p><em>The computational engine indicates how the model is fit, such as with a specific R package implementation or even methods outside of R like Keras or Stan</em></p>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-3" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">logistic_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>)</span>
<span id="cb12-3"><a href=""></a><span class="co">#&gt; Logistic Regression Model Specification (classification)</span></span>
<span id="cb12-4"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb12-5"><a href=""></a><span class="co">#&gt; Computational engine: glmnet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-4" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">logistic_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"stan"</span>)</span>
<span id="cb13-3"><a href=""></a><span class="co">#&gt; Logistic Regression Model Specification (classification)</span></span>
<span id="cb13-4"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb13-5"><a href=""></a><span class="co">#&gt; Computational engine: stan</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-5" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Choose a model</li>
<li>Specify an engine</li>
<li>Set the <u>mode</u></li>
</ul>
</div><div class="column" style="width:40%;">
<p><br><br><br> <img data-src="images/forest_mountain.svg" class="absolute" style="height: 300px; "></p>
</div>
</div>
<p><br><br></p>
<p><br><br></p>
<p><em>The mode denotes in what kind of modeling context it will be used</em></p>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-6" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="fu">decision_tree</span>()</span>
<span id="cb14-2"><a href=""></a><span class="co">#&gt; Decision Tree Model Specification (unknown mode)</span></span>
<span id="cb14-3"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb14-4"><a href=""></a><span class="co">#&gt; Computational engine: rpart</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-7" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="fu">decision_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb15-3"><a href=""></a><span class="co">#&gt; Decision Tree Model Specification (classification)</span></span>
<span id="cb15-4"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb15-5"><a href=""></a><span class="co">#&gt; Computational engine: rpart</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><br><br></p>
<div class="r-fit-text">
<p>All available models are listed at <a href="https://www.tidymodels.org/find/parsnip/" class="uri">https://www.tidymodels.org/find/parsnip/</a></p>
</div>
<div class="footer">

</div>
</div>
</section>
<section id="section-5" class="slide level2" data-background-iframe="https://www.tidymodels.org/find/parsnip/">
<h2></h2>
<div class="footer">

</div>
</section>
<section id="to-specify-a-model-8" class="slide level2">
<h2>To specify a model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Choose a <u>model</u></li>
<li>Specify an <u>engine</u></li>
<li>Set the <u>mode</u></li>
</ul>
</div><div class="column" style="width:40%;">
<p><br><br><br> <img data-src="images/forest_mountain.svg" class="absolute" style="height: 300px; "></p>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-3" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Run the <code>tree_spec</code> chunk in your <code>.qmd</code>.</em></p>
<p><em>Edit this code to use a logistic regression model.</em><br><br></p>
<div class="r-fit-text">
<p>All available models are listed at <a href="https://www.tidymodels.org/find/parsnip/" class="uri">https://www.tidymodels.org/find/parsnip/</a></p>
</div>
<p><br><br></p>
<p><em>Extension/Challenge: Edit this code to use a different model. For example, try using a conditional inference tree as implemented in the partykit package by changing the engine - or try an entirely different model type!</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="explore-tree-spec" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="models-well-be-using-today" class="slide level2">
<h2>Models we‚Äôll be using today</h2>
<ul>
<li>Logistic regression</li>
<li>Decision trees</li>
</ul>
<div class="footer">

</div>
</section>
<section id="logistic-regression" class="slide level2">
<h2>Logistic regression</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-rates-1.svg" width="768"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">

</div>
</div>
<div class="footer">

</div>
</section>
<section id="logistic-regression-1" class="slide level2">
<h2>Logistic regression</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-logistic-reg-1.svg" width="768"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">

</div>
</div>
<div class="footer">

</div>
</section>
<section id="logistic-regression-2" class="slide level2">
<h2>Logistic regression</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-logistic-reg-2-1.svg" width="768"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li>Logit of outcome probability modeled as linear combination of predictors:</li>
</ul>
<p><span class="math inline">\(log(\frac{p}{1 - p}) = \beta_0 + \beta_1\cdot \text{A}\)</span></p>
<ul>
<li>Find a sigmoid line that separates the two classes</li>
</ul>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="decision-trees" class="slide level2">
<h2>Decision trees</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-fit-1.svg" class="quarto-figure quarto-figure-center" width="384"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">

</div>
</div>
<div class="footer">

</div>
</section>
<section id="decision-trees-1" class="slide level2">
<h2>Decision trees</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-fit-2-1.svg" class="quarto-figure quarto-figure-center" width="384"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Series of splits or if/then statements based on predictors</p></li>
<li><p>First the tree <em>grows</em> until some condition is met (maximum depth, no more data)</p></li>
<li><p>Then the tree is <em>pruned</em> to reduce its complexity</p></li>
</ul>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="decision-trees-2" class="slide level2">
<h2>Decision trees</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-fit-3-1.svg" class="quarto-figure quarto-figure-center" width="384"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-preds-1.svg" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="all-models-are-wrong-but-some-are-useful" class="slide level2">
<h2>All models are wrong, but some are useful!</h2>
<div class="footer">

</div>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="logistic-regression-3">Logistic regression</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-logistic-reg-3-1.svg" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="footer">

</div><div class="column" style="width:50%;">
<h3 id="decision-trees-3">Decision trees</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-preds-2-1.svg" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="footer">

</div>
</section></section>
<section>
<section id="a-model-workflow" class="title-slide slide level1 center">
<h1>A model workflow</h1>
<div class="footer">

</div>
</section>
<section id="workflows-bind-preprocessors-and-models" class="slide level2">
<h2>Workflows bind preprocessors and models</h2>

<img data-src="images/good_workflow.png" class="quarto-figure quarto-figure-center r-stretch" style="width:70.0%"><aside class="notes">
<p>Explain that PCA that is a preprocessor / dimensionality reduction, used to decorrelate data</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="what-is-wrong-with-this" class="slide level2 annotation">
<h2>What is wrong with this?</h2>

<img data-src="images/bad_workflow.png" class="quarto-figure quarto-figure-center r-stretch" style="width:70.0%"><aside class="notes">
<p>In this diagram, PCA is applied directly to the full dataset, before the modeling workflow begins. Because it leaks information from the full dataset (including the test set or validation folds) into the preprocessing step. This is a form of data leakage, and it means your model could look like it performs better than it truly does, because it has ‚Äúpeeked‚Äù at data it shouldn‚Äôt have seen.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="why-a-workflow" class="slide level2">
<h2>Why a <code>workflow()</code>? <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="fragment">
<ul>
<li>Workflows handle new data better than base R tools in terms of new factor levels</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>You can use other preprocessors besides formulas (more on feature engineering in part 2 of the course)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>They can help organize your work when working with multiple models</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><u>Most importantly</u>, a workflow captures the entire modeling process: <code>fit()</code> and <code>predict()</code> apply to the preprocessing steps in addition to the actual model fit</li>
</ul>
<aside class="notes">
<p>Two ways workflows handle levels better than base R:</p>
<ul>
<li><p>Enforces that new levels are not allowed at prediction time (this is an optional check that can be turned off)</p></li>
<li><p>Restores missing levels that were present at fit time, but happen to be missing at prediction time (like, if your ‚Äúnew‚Äù data just doesn‚Äôt have an instance of that level)</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</div>
</section>
<section id="a-model-workflow-1" class="slide level2">
<h2>A model workflow <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a>tree_spec <span class="ot">&lt;-</span></span>
<span id="cb16-2"><a href=""></a>  <span class="fu">decision_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb16-4"><a href=""></a></span>
<span id="cb16-5"><a href=""></a>tree_spec <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href=""></a>  <span class="fu">fit</span>(forested <span class="sc">~</span> ., <span class="at">data =</span> forested_train) </span>
<span id="cb16-7"><a href=""></a><span class="co">#&gt; parsnip model object</span></span>
<span id="cb16-8"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb16-9"><a href=""></a><span class="co">#&gt; n= 5685 </span></span>
<span id="cb16-10"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb16-11"><a href=""></a><span class="co">#&gt; node), split, n, loss, yval, (yprob)</span></span>
<span id="cb16-12"><a href=""></a><span class="co">#&gt;       * denotes terminal node</span></span>
<span id="cb16-13"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb16-14"><a href=""></a><span class="co">#&gt;  1) root 5685 2550 Yes (0.55145119 0.44854881)  </span></span>
<span id="cb16-15"><a href=""></a><span class="co">#&gt;    2) land_type=Tree 3064  300 Yes (0.90208877 0.09791123) *</span></span>
<span id="cb16-16"><a href=""></a><span class="co">#&gt;    3) land_type=Barren,Non-tree vegetation 2621  371 No (0.14154903 0.85845097)  </span></span>
<span id="cb16-17"><a href=""></a><span class="co">#&gt;      6) temp_annual_max&lt; 13.395 347  153 Yes (0.55907781 0.44092219)  </span></span>
<span id="cb16-18"><a href=""></a><span class="co">#&gt;       12) tree_no_tree=Tree 92    6 Yes (0.93478261 0.06521739) *</span></span>
<span id="cb16-19"><a href=""></a><span class="co">#&gt;       13) tree_no_tree=No tree 255  108 No (0.42352941 0.57647059) *</span></span>
<span id="cb16-20"><a href=""></a><span class="co">#&gt;      7) temp_annual_max&gt;=13.395 2274  177 No (0.07783641 0.92216359) *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="a-model-workflow-2" class="slide level2">
<h2>A model workflow <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a>tree_spec <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href=""></a>  <span class="fu">decision_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb17-4"><a href=""></a></span>
<span id="cb17-5"><a href=""></a><span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href=""></a>  <span class="fu">add_formula</span>(forested <span class="sc">~</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href=""></a>  <span class="fu">add_model</span>(tree_spec) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href=""></a>  <span class="fu">fit</span>(<span class="at">data =</span> forested_train) </span>
<span id="cb17-9"><a href=""></a><span class="co">#&gt; ‚ïê‚ïê Workflow [trained] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span id="cb17-10"><a href=""></a><span class="co">#&gt; Preprocessor: Formula</span></span>
<span id="cb17-11"><a href=""></a><span class="co">#&gt; Model: decision_tree()</span></span>
<span id="cb17-12"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb17-13"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb17-14"><a href=""></a><span class="co">#&gt; forested ~ .</span></span>
<span id="cb17-15"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb17-16"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb17-17"><a href=""></a><span class="co">#&gt; n= 5685 </span></span>
<span id="cb17-18"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb17-19"><a href=""></a><span class="co">#&gt; node), split, n, loss, yval, (yprob)</span></span>
<span id="cb17-20"><a href=""></a><span class="co">#&gt;       * denotes terminal node</span></span>
<span id="cb17-21"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb17-22"><a href=""></a><span class="co">#&gt;  1) root 5685 2550 Yes (0.55145119 0.44854881)  </span></span>
<span id="cb17-23"><a href=""></a><span class="co">#&gt;    2) land_type=Tree 3064  300 Yes (0.90208877 0.09791123) *</span></span>
<span id="cb17-24"><a href=""></a><span class="co">#&gt;    3) land_type=Barren,Non-tree vegetation 2621  371 No (0.14154903 0.85845097)  </span></span>
<span id="cb17-25"><a href=""></a><span class="co">#&gt;      6) temp_annual_max&lt; 13.395 347  153 Yes (0.55907781 0.44092219)  </span></span>
<span id="cb17-26"><a href=""></a><span class="co">#&gt;       12) tree_no_tree=Tree 92    6 Yes (0.93478261 0.06521739) *</span></span>
<span id="cb17-27"><a href=""></a><span class="co">#&gt;       13) tree_no_tree=No tree 255  108 No (0.42352941 0.57647059) *</span></span>
<span id="cb17-28"><a href=""></a><span class="co">#&gt;      7) temp_annual_max&gt;=13.395 2274  177 No (0.07783641 0.92216359) *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="a-model-workflow-3" class="slide level2">
<h2>A model workflow <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>tree_spec <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href=""></a>  <span class="fu">decision_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb18-4"><a href=""></a></span>
<span id="cb18-5"><a href=""></a><span class="fu">workflow</span>(forested <span class="sc">~</span> ., tree_spec) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href=""></a>  <span class="fu">fit</span>(<span class="at">data =</span> forested_train) </span>
<span id="cb18-7"><a href=""></a><span class="co">#&gt; ‚ïê‚ïê Workflow [trained] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span id="cb18-8"><a href=""></a><span class="co">#&gt; Preprocessor: Formula</span></span>
<span id="cb18-9"><a href=""></a><span class="co">#&gt; Model: decision_tree()</span></span>
<span id="cb18-10"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb18-11"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb18-12"><a href=""></a><span class="co">#&gt; forested ~ .</span></span>
<span id="cb18-13"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb18-14"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb18-15"><a href=""></a><span class="co">#&gt; n= 5685 </span></span>
<span id="cb18-16"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb18-17"><a href=""></a><span class="co">#&gt; node), split, n, loss, yval, (yprob)</span></span>
<span id="cb18-18"><a href=""></a><span class="co">#&gt;       * denotes terminal node</span></span>
<span id="cb18-19"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb18-20"><a href=""></a><span class="co">#&gt;  1) root 5685 2550 Yes (0.55145119 0.44854881)  </span></span>
<span id="cb18-21"><a href=""></a><span class="co">#&gt;    2) land_type=Tree 3064  300 Yes (0.90208877 0.09791123) *</span></span>
<span id="cb18-22"><a href=""></a><span class="co">#&gt;    3) land_type=Barren,Non-tree vegetation 2621  371 No (0.14154903 0.85845097)  </span></span>
<span id="cb18-23"><a href=""></a><span class="co">#&gt;      6) temp_annual_max&lt; 13.395 347  153 Yes (0.55907781 0.44092219)  </span></span>
<span id="cb18-24"><a href=""></a><span class="co">#&gt;       12) tree_no_tree=Tree 92    6 Yes (0.93478261 0.06521739) *</span></span>
<span id="cb18-25"><a href=""></a><span class="co">#&gt;       13) tree_no_tree=No tree 255  108 No (0.42352941 0.57647059) *</span></span>
<span id="cb18-26"><a href=""></a><span class="co">#&gt;      7) temp_annual_max&gt;=13.395 2274  177 No (0.07783641 0.92216359) *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-4" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Run the <code>tree_wflow</code> chunk in your <code>.qmd</code>.</em></p>
<p><em>Edit this code to make a workflow with your own model of choice.</em></p>
<p><br><br></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="explore-tree-workflow" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="predict-with-your-model" class="slide level2">
<h2>Predict with your model <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<p>How do you use your new <code>tree_fit</code> model?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a>tree_spec <span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href=""></a>  <span class="fu">decision_tree</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb19-4"><a href=""></a></span>
<span id="cb19-5"><a href=""></a>tree_fit <span class="ot">&lt;-</span></span>
<span id="cb19-6"><a href=""></a>  <span class="fu">workflow</span>(forested <span class="sc">~</span> ., tree_spec) <span class="sc">%&gt;%</span> </span>
<span id="cb19-7"><a href=""></a>  <span class="fu">fit</span>(<span class="at">data =</span> forested_train) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-5" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Run:</em></p>
<p><code>predict(tree_fit, new_data = forested_test)</code></p>
<p><em>What do you notice about the structure of the result?</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="predict-tree-fit" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-6" class="slide level2">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Run:</em></p>
<p><code>augment(tree_fit, new_data = forested_test)</code></p>
<p><em>How does the output compare to the output from <code>predict()</code>?</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="augment-tree-fit" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section></section>
<section>
<section id="the-tidymodels-prediction-guarantee" class="title-slide slide level1 center">
<h1>The tidymodels prediction guarantee!</h1>
<div class="fragment">
<ul>
<li>The predictions will always be inside a <strong>tibble</strong></li>
<li>The column names and types are <strong>unsurprising</strong> and <strong>predictable</strong></li>
<li>The number of rows in <code>new_data</code> and the output <strong>are the same</strong></li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="understand-your-model" class="slide level2">
<h2>Understand your model <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<p>How do you <strong>understand</strong> your new <code>tree_fit</code> model?</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="part-I_files/figure-revealjs/plot-tree-fit-4-1.svg" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="understand-your-model-1" class="slide level2">
<h2>Understand your model <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<p>How do you <strong>understand</strong> your new <code>tree_fit</code> model?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb20-2"><a href=""></a>tree_fit <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href=""></a>  <span class="fu">extract_fit_engine</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href=""></a>  <span class="fu">rpart.plot</span>(<span class="at">roundint =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can <code>extract_*()</code> several components of your fitted workflow.</p>
<div class="fragment">
<p>‚ö†Ô∏è <em>Never <code>predict()</code> with any extracted components!</em></p>
<aside class="notes">
<p><code>roundint = FALSE</code> is only to quiet a warning</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</div>
</section>
<section id="understand-your-model-2" class="slide level2">
<h2>Understand your model <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "> <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 64px; width: 64px; height: 74.24px; "></h2>
<p>How do you <strong>understand</strong> your new <code>tree_fit</code> model?</p>
<div class="fragment">
<p>You can use your fitted workflow for model and/or prediction explanations:</p>
</div>
<div class="fragment">
<ul>
<li>overall variable importance, such as with the <a href="https://koalaverse.github.io/vip/">vip</a> package</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>flexible model explainers, such as with the <a href="https://dalex.drwhy.ai/">DALEXtra</a> package</li>
</ul>
</div>
<div class="fragment">
<p>Learn more at <a href="https://www.tmwr.org/explain.html" class="uri">https://www.tmwr.org/explain.html</a></p>
<div class="footer">

</div>
</div>
</section>
<section id="section-6" class="slide level2" data-background-iframe="https://hardhat.tidymodels.org/reference/hardhat-extract.html">
<h2></h2>
<div class="footer">

</div>
</section>
<section id="your-turn-7" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><br></p>
<p><em>Extract the model engine object from your fitted workflow and check it out.</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="extract-methods" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<aside class="notes">
<p>Afterward, ask what kind of object people got from the extraction, and what they did with it (e.g.&nbsp;give it to <code>summary()</code>, <code>plot()</code>, <code>broom::tidy()</code> ). Live code along</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="the-whole-game---status-update-1" class="slide level2">
<h2>The whole game - status update</h2>

<img data-src="images/whole-game-transparent-model-1.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><aside class="notes">
<p>Stress that fitting a model on the entire training set was only for illustrating how to fit a model</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section></section>
<section id="evaluate-the-model" class="title-slide slide level1 center">
<h1>Evaluate the model</h1>
<div class="footer">

</div>
</section>

<section>
<section id="open-worksheet-3" class="title-slide slide level1 center">
<h1>Open Worksheet 3 üìÑ</h1>
<div class="footer">

</div>
</section>
<section id="looking-at-predictions" class="slide level2">
<h2>Looking at predictions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train)</span>
<span id="cb21-2"><a href=""></a><span class="co">#&gt; # A tibble: 5,685 √ó 22</span></span>
<span id="cb21-3"><a href=""></a><span class="co">#&gt;    .pred_class .pred_Yes .pred_No forested  year elevation eastness northness</span></span>
<span id="cb21-4"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb21-5"><a href=""></a><span class="co">#&gt;  1 No             0.0114   0.989  No        2016       464       -5       -99</span></span>
<span id="cb21-6"><a href=""></a><span class="co">#&gt;  2 Yes            0.636    0.364  Yes       2016       166       92        37</span></span>
<span id="cb21-7"><a href=""></a><span class="co">#&gt;  3 No             0.0114   0.989  No        2016       644      -85       -52</span></span>
<span id="cb21-8"><a href=""></a><span class="co">#&gt;  4 Yes            0.977    0.0226 Yes       2014      1285        4        99</span></span>
<span id="cb21-9"><a href=""></a><span class="co">#&gt;  5 Yes            0.977    0.0226 Yes       2013       822       87        48</span></span>
<span id="cb21-10"><a href=""></a><span class="co">#&gt;  6 Yes            0.808    0.192  Yes       2017         3        6       -99</span></span>
<span id="cb21-11"><a href=""></a><span class="co">#&gt;  7 Yes            0.977    0.0226 Yes       2014      2041      -95        28</span></span>
<span id="cb21-12"><a href=""></a><span class="co">#&gt;  8 Yes            0.977    0.0226 Yes       2015      1009       -8        99</span></span>
<span id="cb21-13"><a href=""></a><span class="co">#&gt;  9 No             0.0114   0.989  No        2017       436      -98        19</span></span>
<span id="cb21-14"><a href=""></a><span class="co">#&gt; 10 No             0.0114   0.989  No        2018       775       63        76</span></span>
<span id="cb21-15"><a href=""></a><span class="co">#&gt; # ‚Ñπ 5,675 more rows</span></span>
<span id="cb21-16"><a href=""></a><span class="co">#&gt; # ‚Ñπ 14 more variables: roughness &lt;dbl&gt;, tree_no_tree &lt;fct&gt;, dew_temp &lt;dbl&gt;,</span></span>
<span id="cb21-17"><a href=""></a><span class="co">#&gt; #   precip_annual &lt;dbl&gt;, temp_annual_mean &lt;dbl&gt;, temp_annual_min &lt;dbl&gt;,</span></span>
<span id="cb21-18"><a href=""></a><span class="co">#&gt; #   temp_annual_max &lt;dbl&gt;, temp_january_min &lt;dbl&gt;, vapor_min &lt;dbl&gt;,</span></span>
<span id="cb21-19"><a href=""></a><span class="co">#&gt; #   vapor_max &lt;dbl&gt;, canopy_cover &lt;dbl&gt;, lon &lt;dbl&gt;, lat &lt;dbl&gt;, land_type &lt;fct&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="confusion-matrix" class="slide level2">
<h2>Confusion matrix <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p><img data-src="images/confusion-matrix.png"></p>
<div class="footer">

</div>
</section>
<section id="confusion-matrix-1" class="slide level2">
<h2>Confusion matrix <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href=""></a>  <span class="fu">conf_mat</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb22-3"><a href=""></a><span class="co">#&gt;           Truth</span></span>
<span id="cb22-4"><a href=""></a><span class="co">#&gt; Prediction  Yes   No</span></span>
<span id="cb22-5"><a href=""></a><span class="co">#&gt;        Yes 2991  176</span></span>
<span id="cb22-6"><a href=""></a><span class="co">#&gt;        No   144 2374</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="confusion-matrix-2" class="slide level2">
<h2>Confusion matrix <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href=""></a>  <span class="fu">conf_mat</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href=""></a>  <span class="fu">autoplot</span>(<span class="at">type =</span> <span class="st">"heatmap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/conf-mat-plot-1.svg" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="metrics-for-model-performance" class="slide level2">
<h2>Metrics for model performance <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href=""></a>  <span class="fu">accuracy</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb24-3"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb24-4"><a href=""></a><span class="co">#&gt;   .metric  .estimator .estimate</span></span>
<span id="cb24-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb24-6"><a href=""></a><span class="co">#&gt; 1 accuracy binary         0.944</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/confusion-matrix-accuracy.png"></p>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="metrics-for-model-performance-1" class="slide level2">
<h2>Metrics for model performance <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href=""></a>  <span class="fu">sensitivity</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb25-3"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb25-4"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb25-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb25-6"><a href=""></a><span class="co">#&gt; 1 sensitivity binary         0.954</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/confusion-matrix-sensitivity.png"></p>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="metrics-for-model-performance-2" class="slide level2">
<h2>Metrics for model performance <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb26" data-code-line-numbers="3-6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href=""></a>  <span class="fu">sensitivity</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb26-3"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb26-4"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb26-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb26-6"><a href=""></a><span class="co">#&gt; 1 sensitivity binary         0.954</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href=""></a>  <span class="fu">specificity</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb27-3"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb27-4"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb27-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb27-6"><a href=""></a><span class="co">#&gt; 1 specificity binary         0.931</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/confusion-matrix-specificity.png"></p>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="metrics-for-model-performance-3" class="slide level2">
<h2>Metrics for model performance <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>We can use <code>metric_set()</code> to combine multiple calculations into one</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>forested_metrics <span class="ot">&lt;-</span> <span class="fu">metric_set</span>(accuracy, specificity, sensitivity)</span>
<span id="cb28-2"><a href=""></a></span>
<span id="cb28-3"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href=""></a>  <span class="fu">forested_metrics</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb28-5"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 3</span></span>
<span id="cb28-6"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb28-7"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb28-8"><a href=""></a><span class="co">#&gt; 1 accuracy    binary         0.944</span></span>
<span id="cb28-9"><a href=""></a><span class="co">#&gt; 2 specificity binary         0.931</span></span>
<span id="cb28-10"><a href=""></a><span class="co">#&gt; 3 sensitivity binary         0.954</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="metrics-for-model-performance-4" class="slide level2">
<h2>Metrics for model performance <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>Metrics and metric sets work with grouped data frames!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href=""></a>  <span class="fu">group_by</span>(tree_no_tree) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href=""></a>  <span class="fu">accuracy</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb29-4"><a href=""></a><span class="co">#&gt; # A tibble: 2 √ó 4</span></span>
<span id="cb29-5"><a href=""></a><span class="co">#&gt;   tree_no_tree .metric  .estimator .estimate</span></span>
<span id="cb29-6"><a href=""></a><span class="co">#&gt;   &lt;fct&gt;        &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb29-7"><a href=""></a><span class="co">#&gt; 1 Tree         accuracy binary         0.946</span></span>
<span id="cb29-8"><a href=""></a><span class="co">#&gt; 2 No tree      accuracy binary         0.941</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-8" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Apply the <code>forested_metrics</code> metric set to <code>augment()</code><br>
output grouped by <code>tree_no_tree</code>.</em></p>
<p><em>Do any metrics differ substantially between groups?</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="forested-grouped-metrics" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<aside class="notes">
<p>The specificity for <code>"Tree"</code> is a good bit lower than it is for <code>"No tree"</code>.</p>
<p>Specificity is the proportion of negatives that are correctly identified as negatives. ‚ÄúNegative‚Äù is the non-event level of the outcome, i.e.&nbsp;‚Äúnon-forested.‚Äù So, when this index classifies the plot as having a tree, the model does not do well at correctly identifying the plot as non-forested when it is indeed non-forested.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="two-class-data" class="slide level2">
<h2>Two class data</h2>
<p>These metrics assume that we know the threshold for converting ‚Äúsoft‚Äù probability predictions into ‚Äúhard‚Äù class predictions.</p>
<div class="fragment">
<p>Is a 50% threshold good?</p>
<p>What happens if we say that we need to be 80% sure to declare an event?</p>
<ul>
<li>sensitivity ‚¨áÔ∏è, specificity ‚¨ÜÔ∏è</li>
</ul>
</div>
<div class="fragment">
<p>What happens for a 20% threshold?</p>
<ul>
<li>sensitivity ‚¨ÜÔ∏è, specificity ‚¨áÔ∏è</li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="varying-the-threshold" class="slide level2">
<h2>Varying the threshold</h2>

<img data-src="part-I_files/figure-revealjs/thresholds-1.svg" width="960" class="r-stretch"><div class="footer">

</div>
</section>
<section id="roc-curves" class="slide level2">
<h2>ROC curves</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>For an ROC (receiver operator characteristic) curve, we plot</p>
<ul>
<li>the false positive rate (1 - specificity) on the x-axis</li>
<li>the true positive rate (sensitivity) on the y-axis</li>
</ul>
<p>with sensitivity and specificity calculated at all possible thresholds.</p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/roc-curve-1-1.svg" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>ROC curves are insensitive to class imbalance.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="roc-curves-1" class="slide level2">
<h2>ROC curves</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>We can use the area under the ROC curve as a classification metric:</p>
<ul>
<li>ROC AUC = 1 üíØ</li>
<li>ROC AUC = 1/2 üò¢</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/roc-curve-2-1.svg" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="roc-curves-2" class="slide level2">
<h2>ROC curves <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="co"># Assumes _first_ factor level is event; there are options to change that</span></span>
<span id="cb30-2"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href=""></a>  <span class="fu">roc_curve</span>(<span class="at">truth =</span> forested, .pred_Yes) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href=""></a>  <span class="fu">slice</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">50</span>)</span>
<span id="cb30-5"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 3</span></span>
<span id="cb30-6"><a href=""></a><span class="co">#&gt;   .threshold specificity sensitivity</span></span>
<span id="cb30-7"><a href=""></a><span class="co">#&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb30-8"><a href=""></a><span class="co">#&gt; 1   -Inf           0           1    </span></span>
<span id="cb30-9"><a href=""></a><span class="co">#&gt; 2      0.235       0.885       0.972</span></span>
<span id="cb30-10"><a href=""></a><span class="co">#&gt; 3      0.909       0.969       0.826</span></span>
<span id="cb30-11"><a href=""></a></span>
<span id="cb30-12"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span> </span>
<span id="cb30-13"><a href=""></a>  <span class="fu">roc_auc</span>(<span class="at">truth =</span> forested, .pred_Yes)</span>
<span id="cb30-14"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb30-15"><a href=""></a><span class="co">#&gt;   .metric .estimator .estimate</span></span>
<span id="cb30-16"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb30-17"><a href=""></a><span class="co">#&gt; 1 roc_auc binary         0.975</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="roc-curve-plot" class="slide level2">
<h2>ROC curve plot <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="fu">augment</span>(forested_fit, </span>
<span id="cb31-2"><a href=""></a>        <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href=""></a>  <span class="fu">roc_curve</span>(<span class="at">truth =</span> forested, </span>
<span id="cb31-4"><a href=""></a>            .pred_Yes) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href=""></a>  <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/roc-curve-code-1.svg" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-9" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Compute and plot an ROC curve for your current model.</em></p>
<p><em>What data are being used for this ROC curve plot?</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="roc-curve" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="brier-score" class="slide level2">
<h2>Brier score</h2>
<p>What if we don‚Äôt turn predicted probabilities into class predictions?</p>
<div class="fragment">
<p>The Brier score is analogous to the mean squared error in regression models:</p>
<p><span class="math display">\[
Brier_{class} = \frac{1}{N}\sum_{i=1}^N\sum_{k=1}^C (y_{ik} - \hat{p}_{ik})^2
\]</span></p>
<div class="footer">

</div>
</div>
</section>
<section id="brier-score-1" class="slide level2 annotation">
<h2>Brier score</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="fu">augment</span>(forested_fit, <span class="at">new_data =</span> forested_train) <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href=""></a>  <span class="fu">brier_class</span>(<span class="at">truth =</span> forested, .pred_Yes) </span>
<span id="cb32-3"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb32-4"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb32-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb32-6"><a href=""></a><span class="co">#&gt; 1 brier_class binary        0.0469</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Smaller values are better, for binary classification the ‚Äúbad model threshold‚Äù is about 0.25.</p>
<div class="footer">

</div>
</div>
</section>
<section id="separation-vs-calibration" class="slide level2">
<h2>Separation vs calibration</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The ROC captures separation.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/separation-forested-1.svg" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>The Brier score captures calibration.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="part-I_files/figure-revealjs/calibration-forested-1.svg" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Good separation: the densities don‚Äôt overlap.</li>
<li>Good calibration: the calibration line follows the diagonal.</li>
</ul>
<p>Calibration plot: We bin observations according to predicted probability. In the bin for 20%-30% predicted prob, we should see an event rate of ~25% if the model is well-calibrated.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="section-7" class="slide level2" data-background-iframe="https://yardstick.tidymodels.org/reference/index.html">
<h2></h2>
<div class="footer">

</div>
</section></section>
<section>
<section id="dangers-of-overfitting" class="title-slide slide level1 center">
<h1>‚ö†Ô∏è DANGERS OF OVERFITTING ‚ö†Ô∏è</h1>
<div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-1" class="slide level2 annotation">
<h2>Dangers of overfitting</h2>

<img data-src="https://raw.githubusercontent.com/topepo/2022-nyr-workshop/main/images/tuning-overfitting-train-1.svg" class="r-stretch"><div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-2" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è</h2>

<img data-src="https://raw.githubusercontent.com/topepo/2022-nyr-workshop/main/images/tuning-overfitting-test-1.svg" class="r-stretch"><div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-3" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href=""></a>  <span class="fu">augment</span>(forested_train)</span>
<span id="cb33-3"><a href=""></a><span class="co">#&gt; # A tibble: 5,685 √ó 22</span></span>
<span id="cb33-4"><a href=""></a><span class="co">#&gt;    .pred_class .pred_Yes .pred_No forested  year elevation eastness northness</span></span>
<span id="cb33-5"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb33-6"><a href=""></a><span class="co">#&gt;  1 No             0.0114   0.989  No        2016       464       -5       -99</span></span>
<span id="cb33-7"><a href=""></a><span class="co">#&gt;  2 Yes            0.636    0.364  Yes       2016       166       92        37</span></span>
<span id="cb33-8"><a href=""></a><span class="co">#&gt;  3 No             0.0114   0.989  No        2016       644      -85       -52</span></span>
<span id="cb33-9"><a href=""></a><span class="co">#&gt;  4 Yes            0.977    0.0226 Yes       2014      1285        4        99</span></span>
<span id="cb33-10"><a href=""></a><span class="co">#&gt;  5 Yes            0.977    0.0226 Yes       2013       822       87        48</span></span>
<span id="cb33-11"><a href=""></a><span class="co">#&gt;  6 Yes            0.808    0.192  Yes       2017         3        6       -99</span></span>
<span id="cb33-12"><a href=""></a><span class="co">#&gt;  7 Yes            0.977    0.0226 Yes       2014      2041      -95        28</span></span>
<span id="cb33-13"><a href=""></a><span class="co">#&gt;  8 Yes            0.977    0.0226 Yes       2015      1009       -8        99</span></span>
<span id="cb33-14"><a href=""></a><span class="co">#&gt;  9 No             0.0114   0.989  No        2017       436      -98        19</span></span>
<span id="cb33-15"><a href=""></a><span class="co">#&gt; 10 No             0.0114   0.989  No        2018       775       63        76</span></span>
<span id="cb33-16"><a href=""></a><span class="co">#&gt; # ‚Ñπ 5,675 more rows</span></span>
<span id="cb33-17"><a href=""></a><span class="co">#&gt; # ‚Ñπ 14 more variables: roughness &lt;dbl&gt;, tree_no_tree &lt;fct&gt;, dew_temp &lt;dbl&gt;,</span></span>
<span id="cb33-18"><a href=""></a><span class="co">#&gt; #   precip_annual &lt;dbl&gt;, temp_annual_mean &lt;dbl&gt;, temp_annual_min &lt;dbl&gt;,</span></span>
<span id="cb33-19"><a href=""></a><span class="co">#&gt; #   temp_annual_max &lt;dbl&gt;, temp_january_min &lt;dbl&gt;, vapor_min &lt;dbl&gt;,</span></span>
<span id="cb33-20"><a href=""></a><span class="co">#&gt; #   vapor_max &lt;dbl&gt;, canopy_cover &lt;dbl&gt;, lon &lt;dbl&gt;, lat &lt;dbl&gt;, land_type &lt;fct&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We call this ‚Äúresubstitution‚Äù or ‚Äúrepredicting the training set‚Äù</p>
<div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-4" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href=""></a>  <span class="fu">augment</span>(forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href=""></a>  <span class="fu">accuracy</span>(forested, .pred_class)</span>
<span id="cb34-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb34-5"><a href=""></a><span class="co">#&gt;   .metric  .estimator .estimate</span></span>
<span id="cb34-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb34-7"><a href=""></a><span class="co">#&gt; 1 accuracy binary         0.944</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We call this a ‚Äúresubstitution estimate‚Äù</p>
<div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-5" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href=""></a>  <span class="fu">augment</span>(forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href=""></a>  <span class="fu">accuracy</span>(forested, .pred_class)</span>
<span id="cb35-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb35-5"><a href=""></a><span class="co">#&gt;   .metric  .estimator .estimate</span></span>
<span id="cb35-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb35-7"><a href=""></a><span class="co">#&gt; 1 accuracy binary         0.944</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div>
</div>
<div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-6" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href=""></a>  <span class="fu">augment</span>(forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href=""></a>  <span class="fu">accuracy</span>(forested, .pred_class)</span>
<span id="cb36-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb36-5"><a href=""></a><span class="co">#&gt;   .metric  .estimator .estimate</span></span>
<span id="cb36-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb36-7"><a href=""></a><span class="co">#&gt; 1 accuracy binary         0.944</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href=""></a>  <span class="fu">augment</span>(forested_test) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href=""></a>  <span class="fu">accuracy</span>(forested, .pred_class)</span>
<span id="cb37-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb37-5"><a href=""></a><span class="co">#&gt;   .metric  .estimator .estimate</span></span>
<span id="cb37-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb37-7"><a href=""></a><span class="co">#&gt; 1 accuracy binary         0.886</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="fragment">
<p>‚ö†Ô∏è Remember that we‚Äôre demonstrating overfitting</p>
</div>
<div class="fragment">
<p>‚ö†Ô∏è Don‚Äôt use the test set until the <em>end</em> of your modeling analysis</p>
<div class="footer">

</div>
</div>
</section>
<section id="section-8" class="slide level2" data-background-image="https://media.giphy.com/media/55itGuoAJiZEEen9gg/giphy.gif" data-background-size="70%">
<h2></h2>
<div class="footer">

</div>
</section>
<section id="your-turn-10" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="left: 0px; bottom: 0px; width: 150px; height: 150px; "></p>
<p><em>Use <code>augment()</code> and a metric function to compute a classification metric like <code>brier_class()</code>.</em></p>
<p><em>Compute the metrics for both training and testing data to demonstrate overfitting!</em></p>
<p><em>Notice the evidence of overfitting!</em> ‚ö†Ô∏è</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="augment-metrics" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="dangers-of-overfitting-7" class="slide level2">
<h2>Dangers of overfitting ‚ö†Ô∏è <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href=""></a>  <span class="fu">augment</span>(forested_train) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href=""></a>  <span class="fu">brier_class</span>(forested, .pred_Yes)</span>
<span id="cb38-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb38-5"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb38-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb38-7"><a href=""></a><span class="co">#&gt; 1 brier_class binary        0.0469</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>forested_fit <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href=""></a>  <span class="fu">augment</span>(forested_test) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href=""></a>  <span class="fu">brier_class</span>(forested, .pred_Yes)</span>
<span id="cb39-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 3</span></span>
<span id="cb39-5"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate</span></span>
<span id="cb39-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb39-7"><a href=""></a><span class="co">#&gt; 1 brier_class binary        0.0888</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="fragment">
<p>What if we want to compare more models?</p>
</div>
<div class="fragment">
<p>And/or more model configurations?</p>
</div>
<div class="fragment">
<p>And we want to understand if these are important differences?</p>
<div class="footer">

</div>
</div>
</section></section>
<section id="the-testing-data-are-precious" class="title-slide slide level1 center">
<h1>The testing data are precious üíé</h1>
<div class="footer">

</div>
</section>

<section>
<section id="how-can-we-use-the-training-data-to-compare-and-evaluate-different-models" class="title-slide slide level1 center">
<h1>How can we use the <em>training</em> data to compare and evaluate different models? ü§î</h1>
<div class="footer">

</div>
</section>
<section id="section-9" class="slide level2" data-background-color="white" data-background-image="https://www.tmwr.org/premade/resampling.svg" data-background-size="80%">
<h2></h2>
<div class="footer">

</div>
</section>
<section id="cross-validation" class="slide level2">
<h2>Cross-validation</h2>

<img data-src="https://www.tmwr.org/premade/three-CV.svg" class="r-stretch"><div class="footer">

</div>
</section>
<section id="cross-validation-1" class="slide level2">
<h2>Cross-validation</h2>

<img data-src="https://www.tmwr.org/premade/three-CV-iter.svg" class="r-stretch"><div class="footer">

</div>
</section>
<section id="your-turn-11" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>If we use 10 folds, what percent of the training data</em></p>
<ul>
<li><em>ends up in analysis</em></li>
<li><em>ends up in assessment</em></li>
</ul>
<p><em>for</em> <strong>each</strong> <em>fold?</em></p>
<p><img data-src="images/forest_mountain.svg" width="200"></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="percent-in-folds" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="cross-validation-2" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="fu">vfold_cv</span>(forested_train) <span class="co"># v = 10 is default</span></span>
<span id="cb40-2"><a href=""></a><span class="co">#&gt; #  10-fold cross-validation </span></span>
<span id="cb40-3"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 2</span></span>
<span id="cb40-4"><a href=""></a><span class="co">#&gt;    splits             id    </span></span>
<span id="cb40-5"><a href=""></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt; </span></span>
<span id="cb40-6"><a href=""></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01</span></span>
<span id="cb40-7"><a href=""></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02</span></span>
<span id="cb40-8"><a href=""></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03</span></span>
<span id="cb40-9"><a href=""></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04</span></span>
<span id="cb40-10"><a href=""></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05</span></span>
<span id="cb40-11"><a href=""></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06</span></span>
<span id="cb40-12"><a href=""></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07</span></span>
<span id="cb40-13"><a href=""></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08</span></span>
<span id="cb40-14"><a href=""></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09</span></span>
<span id="cb40-15"><a href=""></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="cross-validation-3" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>What is in this?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>forested_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(forested_train)</span>
<span id="cb41-2"><a href=""></a>forested_folds<span class="sc">$</span>splits[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb41-3"><a href=""></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb41-4"><a href=""></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb41-5"><a href=""></a><span class="co">#&gt; &lt;5116/569/5685&gt;</span></span>
<span id="cb41-6"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb41-7"><a href=""></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb41-8"><a href=""></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb41-9"><a href=""></a><span class="co">#&gt; &lt;5116/569/5685&gt;</span></span>
<span id="cb41-10"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb41-11"><a href=""></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb41-12"><a href=""></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb41-13"><a href=""></a><span class="co">#&gt; &lt;5116/569/5685&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Talk about a list column, storing non-atomic types in dataframe</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="cross-validation-4" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="fu">vfold_cv</span>(forested_train, <span class="at">v =</span> <span class="dv">5</span>)</span>
<span id="cb42-2"><a href=""></a><span class="co">#&gt; #  5-fold cross-validation </span></span>
<span id="cb42-3"><a href=""></a><span class="co">#&gt; # A tibble: 5 √ó 2</span></span>
<span id="cb42-4"><a href=""></a><span class="co">#&gt;   splits              id   </span></span>
<span id="cb42-5"><a href=""></a><span class="co">#&gt;   &lt;list&gt;              &lt;chr&gt;</span></span>
<span id="cb42-6"><a href=""></a><span class="co">#&gt; 1 &lt;split [4548/1137]&gt; Fold1</span></span>
<span id="cb42-7"><a href=""></a><span class="co">#&gt; 2 &lt;split [4548/1137]&gt; Fold2</span></span>
<span id="cb42-8"><a href=""></a><span class="co">#&gt; 3 &lt;split [4548/1137]&gt; Fold3</span></span>
<span id="cb42-9"><a href=""></a><span class="co">#&gt; 4 &lt;split [4548/1137]&gt; Fold4</span></span>
<span id="cb42-10"><a href=""></a><span class="co">#&gt; 5 &lt;split [4548/1137]&gt; Fold5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="cross-validation-5" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>We‚Äôll use this setup:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb43-2"><a href=""></a>forested_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(forested_train, <span class="at">v =</span> <span class="dv">10</span>)</span>
<span id="cb43-3"><a href=""></a>forested_folds</span>
<span id="cb43-4"><a href=""></a><span class="co">#&gt; #  10-fold cross-validation </span></span>
<span id="cb43-5"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 2</span></span>
<span id="cb43-6"><a href=""></a><span class="co">#&gt;    splits             id    </span></span>
<span id="cb43-7"><a href=""></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt; </span></span>
<span id="cb43-8"><a href=""></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01</span></span>
<span id="cb43-9"><a href=""></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02</span></span>
<span id="cb43-10"><a href=""></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03</span></span>
<span id="cb43-11"><a href=""></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04</span></span>
<span id="cb43-12"><a href=""></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05</span></span>
<span id="cb43-13"><a href=""></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06</span></span>
<span id="cb43-14"><a href=""></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07</span></span>
<span id="cb43-15"><a href=""></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08</span></span>
<span id="cb43-16"><a href=""></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09</span></span>
<span id="cb43-17"><a href=""></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Set the seed when creating resamples</p>
<div class="footer">

</div>
</div>
</section></section>
<section>
<section id="we-are-equipped-with-metrics-and-resamples" class="title-slide slide level1 center">
<h1>We are equipped with metrics and resamples!</h1>
<div class="footer">

</div>
</section>
<section id="fit-our-model-to-the-resamples" class="slide level2">
<h2>Fit our model to the resamples</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a>forested_res <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(forested_wflow, forested_folds)</span>
<span id="cb44-2"><a href=""></a>forested_res</span>
<span id="cb44-3"><a href=""></a><span class="co">#&gt; # Resampling results</span></span>
<span id="cb44-4"><a href=""></a><span class="co">#&gt; # 10-fold cross-validation </span></span>
<span id="cb44-5"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 4</span></span>
<span id="cb44-6"><a href=""></a><span class="co">#&gt;    splits             id     .metrics         .notes          </span></span>
<span id="cb44-7"><a href=""></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;           &lt;list&gt;          </span></span>
<span id="cb44-8"><a href=""></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-9"><a href=""></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-10"><a href=""></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-11"><a href=""></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-12"><a href=""></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-13"><a href=""></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-14"><a href=""></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-15"><a href=""></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-16"><a href=""></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span>
<span id="cb44-17"><a href=""></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluating-model-performance" class="slide level2">
<h2>Evaluating model performance <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a>forested_res <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href=""></a>  <span class="fu">collect_metrics</span>()</span>
<span id="cb45-3"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 6</span></span>
<span id="cb45-4"><a href=""></a><span class="co">#&gt;   .metric     .estimator   mean     n std_err .config             </span></span>
<span id="cb45-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb45-6"><a href=""></a><span class="co">#&gt; 1 accuracy    binary     0.894     10 0.00562 Preprocessor1_Model1</span></span>
<span id="cb45-7"><a href=""></a><span class="co">#&gt; 2 brier_class binary     0.0817    10 0.00434 Preprocessor1_Model1</span></span>
<span id="cb45-8"><a href=""></a><span class="co">#&gt; 3 roc_auc     binary     0.951     10 0.00378 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p><code>collect_metrics()</code> is one of a suite of <code>collect_*()</code> functions that can be used to work with columns of tuning results. Most columns in a tuning result prefixed with <code>.</code> have a corresponding <code>collect_*()</code> function with options for common summaries.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<p>We can reliably measure performance using only the <strong>training</strong> data üéâ</p>
<div class="footer">

</div>
</div>
</section>
<section id="comparing-metrics" class="slide level2">
<h2>Comparing metrics <img data-src="hexes/yardstick.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>How do the metrics from resampling compare to the metrics from training and testing?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a>forested_res <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href=""></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href=""></a>  <span class="fu">select</span>(.metric, mean, n)</span>
<span id="cb46-4"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 3</span></span>
<span id="cb46-5"><a href=""></a><span class="co">#&gt;   .metric       mean     n</span></span>
<span id="cb46-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb46-7"><a href=""></a><span class="co">#&gt; 1 accuracy    0.894     10</span></span>
<span id="cb46-8"><a href=""></a><span class="co">#&gt; 2 brier_class 0.0817    10</span></span>
<span id="cb46-9"><a href=""></a><span class="co">#&gt; 3 roc_auc     0.951     10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>The ROC AUC previously was</p>
<ul>
<li>0.97 for the training set</li>
<li>0.95 for test set</li>
</ul>
</div>
</div>
<div class="fragment">
<p>Remember that:</p>
<p>‚ö†Ô∏è the training set gives you overly optimistic metrics</p>
<p>‚ö†Ô∏è the test set is precious</p>
<div class="footer">

</div>
</div>
</section>
<section id="evaluating-model-performance-1" class="slide level2">
<h2>Evaluating model performance <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="co"># Save the assessment set results</span></span>
<span id="cb47-2"><a href=""></a>ctrl_forested <span class="ot">&lt;-</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-3"><a href=""></a>forested_res <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(forested_wflow, forested_folds, <span class="at">control =</span> ctrl_forested)</span>
<span id="cb47-4"><a href=""></a></span>
<span id="cb47-5"><a href=""></a>forested_res</span>
<span id="cb47-6"><a href=""></a><span class="co">#&gt; # Resampling results</span></span>
<span id="cb47-7"><a href=""></a><span class="co">#&gt; # 10-fold cross-validation </span></span>
<span id="cb47-8"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 5</span></span>
<span id="cb47-9"><a href=""></a><span class="co">#&gt;    splits             id     .metrics         .notes           .predictions</span></span>
<span id="cb47-10"><a href=""></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;           &lt;list&gt;           &lt;list&gt;      </span></span>
<span id="cb47-11"><a href=""></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-12"><a href=""></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-13"><a href=""></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-14"><a href=""></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-15"><a href=""></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-16"><a href=""></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-17"><a href=""></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-18"><a href=""></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-19"><a href=""></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb47-20"><a href=""></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluating-model-performance-2" class="slide level2">
<h2>Evaluating model performance <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="co"># Save the assessment set results</span></span>
<span id="cb48-2"><a href=""></a>forested_preds <span class="ot">&lt;-</span> <span class="fu">collect_predictions</span>(forested_res)</span>
<span id="cb48-3"><a href=""></a>forested_preds</span>
<span id="cb48-4"><a href=""></a><span class="co">#&gt; # A tibble: 5,685 √ó 7</span></span>
<span id="cb48-5"><a href=""></a><span class="co">#&gt;    .pred_class .pred_Yes .pred_No id      .row forested .config             </span></span>
<span id="cb48-6"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;fct&gt;    &lt;chr&gt;               </span></span>
<span id="cb48-7"><a href=""></a><span class="co">#&gt;  1 Yes           0.5       0.5    Fold01     2 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-8"><a href=""></a><span class="co">#&gt;  2 Yes           0.982     0.0178 Fold01     5 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-9"><a href=""></a><span class="co">#&gt;  3 No            0.00790   0.992  Fold01     9 No       Preprocessor1_Model1</span></span>
<span id="cb48-10"><a href=""></a><span class="co">#&gt;  4 No            0.4       0.6    Fold01    14 No       Preprocessor1_Model1</span></span>
<span id="cb48-11"><a href=""></a><span class="co">#&gt;  5 Yes           0.870     0.130  Fold01    18 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-12"><a href=""></a><span class="co">#&gt;  6 Yes           0.982     0.0178 Fold01    59 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-13"><a href=""></a><span class="co">#&gt;  7 No            0.00790   0.992  Fold01    67 No       Preprocessor1_Model1</span></span>
<span id="cb48-14"><a href=""></a><span class="co">#&gt;  8 Yes           0.982     0.0178 Fold01    89 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-15"><a href=""></a><span class="co">#&gt;  9 No            0.00790   0.992  Fold01    94 No       Preprocessor1_Model1</span></span>
<span id="cb48-16"><a href=""></a><span class="co">#&gt; 10 Yes           0.982     0.0178 Fold01   111 Yes      Preprocessor1_Model1</span></span>
<span id="cb48-17"><a href=""></a><span class="co">#&gt; # ‚Ñπ 5,675 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluating-model-performance-3" class="slide level2">
<h2>Evaluating model performance <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>forested_preds <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href=""></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href=""></a>  <span class="fu">forested_metrics</span>(<span class="at">truth =</span> forested, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb49-4"><a href=""></a><span class="co">#&gt; # A tibble: 30 √ó 4</span></span>
<span id="cb49-5"><a href=""></a><span class="co">#&gt;    id     .metric  .estimator .estimate</span></span>
<span id="cb49-6"><a href=""></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb49-7"><a href=""></a><span class="co">#&gt;  1 Fold01 accuracy binary         0.896</span></span>
<span id="cb49-8"><a href=""></a><span class="co">#&gt;  2 Fold02 accuracy binary         0.859</span></span>
<span id="cb49-9"><a href=""></a><span class="co">#&gt;  3 Fold03 accuracy binary         0.868</span></span>
<span id="cb49-10"><a href=""></a><span class="co">#&gt;  4 Fold04 accuracy binary         0.921</span></span>
<span id="cb49-11"><a href=""></a><span class="co">#&gt;  5 Fold05 accuracy binary         0.900</span></span>
<span id="cb49-12"><a href=""></a><span class="co">#&gt;  6 Fold06 accuracy binary         0.891</span></span>
<span id="cb49-13"><a href=""></a><span class="co">#&gt;  7 Fold07 accuracy binary         0.896</span></span>
<span id="cb49-14"><a href=""></a><span class="co">#&gt;  8 Fold08 accuracy binary         0.903</span></span>
<span id="cb49-15"><a href=""></a><span class="co">#&gt;  9 Fold09 accuracy binary         0.896</span></span>
<span id="cb49-16"><a href=""></a><span class="co">#&gt; 10 Fold10 accuracy binary         0.905</span></span>
<span id="cb49-17"><a href=""></a><span class="co">#&gt; # ‚Ñπ 20 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="where-are-the-fitted-models" class="slide level2 annotation">
<h2>Where are the fitted models? <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a>forested_res</span>
<span id="cb50-2"><a href=""></a><span class="co">#&gt; # Resampling results</span></span>
<span id="cb50-3"><a href=""></a><span class="co">#&gt; # 10-fold cross-validation </span></span>
<span id="cb50-4"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 5</span></span>
<span id="cb50-5"><a href=""></a><span class="co">#&gt;    splits             id     .metrics         .notes           .predictions</span></span>
<span id="cb50-6"><a href=""></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;           &lt;list&gt;           &lt;list&gt;      </span></span>
<span id="cb50-7"><a href=""></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-8"><a href=""></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-9"><a href=""></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-10"><a href=""></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-11"><a href=""></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-12"><a href=""></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-13"><a href=""></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-14"><a href=""></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-15"><a href=""></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;    </span></span>
<span id="cb50-16"><a href=""></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10 &lt;tibble [3 √ó 4]&gt; &lt;tibble [0 √ó 3]&gt; &lt;tibble&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>üóëÔ∏è</p>
<div class="footer">

</div>
</div>
</section></section>
<section>
<section id="alternate-resampling-schemes" class="title-slide slide level1 center">
<h1>Alternate resampling schemes</h1>
<div class="footer">

</div>
</section>
<section id="bootstrapping" class="slide level2">
<h2>Bootstrapping</h2>

<img data-src="https://www.tmwr.org/premade/bootstraps.svg" class="r-stretch"><div class="footer">

</div>
</section>
<section id="bootstrapping-1" class="slide level2">
<h2>Bootstrapping <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">3214</span>)</span>
<span id="cb51-2"><a href=""></a><span class="fu">bootstraps</span>(forested_train)</span>
<span id="cb51-3"><a href=""></a><span class="co">#&gt; # Bootstrap sampling </span></span>
<span id="cb51-4"><a href=""></a><span class="co">#&gt; # A tibble: 25 √ó 2</span></span>
<span id="cb51-5"><a href=""></a><span class="co">#&gt;    splits              id         </span></span>
<span id="cb51-6"><a href=""></a><span class="co">#&gt;    &lt;list&gt;              &lt;chr&gt;      </span></span>
<span id="cb51-7"><a href=""></a><span class="co">#&gt;  1 &lt;split [5685/2075]&gt; Bootstrap01</span></span>
<span id="cb51-8"><a href=""></a><span class="co">#&gt;  2 &lt;split [5685/2093]&gt; Bootstrap02</span></span>
<span id="cb51-9"><a href=""></a><span class="co">#&gt;  3 &lt;split [5685/2129]&gt; Bootstrap03</span></span>
<span id="cb51-10"><a href=""></a><span class="co">#&gt;  4 &lt;split [5685/2093]&gt; Bootstrap04</span></span>
<span id="cb51-11"><a href=""></a><span class="co">#&gt;  5 &lt;split [5685/2111]&gt; Bootstrap05</span></span>
<span id="cb51-12"><a href=""></a><span class="co">#&gt;  6 &lt;split [5685/2105]&gt; Bootstrap06</span></span>
<span id="cb51-13"><a href=""></a><span class="co">#&gt;  7 &lt;split [5685/2139]&gt; Bootstrap07</span></span>
<span id="cb51-14"><a href=""></a><span class="co">#&gt;  8 &lt;split [5685/2079]&gt; Bootstrap08</span></span>
<span id="cb51-15"><a href=""></a><span class="co">#&gt;  9 &lt;split [5685/2113]&gt; Bootstrap09</span></span>
<span id="cb51-16"><a href=""></a><span class="co">#&gt; 10 &lt;split [5685/2101]&gt; Bootstrap10</span></span>
<span id="cb51-17"><a href=""></a><span class="co">#&gt; # ‚Ñπ 15 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="section-10" class="slide level2" data-background-iframe="https://rsample.tidymodels.org/reference/index.html">
<h2></h2>
<div class="footer">

</div>
</section>
<section id="the-whole-game---status-update-2" class="slide level2">
<h2>The whole game - status update</h2>

<img data-src="images/whole-game-transparent-resamples.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="your-turn-12" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Create:</em></p>
<ul>
<li><em>Monte Carlo Cross-Validation sets</em></li>
<li><em>validation set</em></li>
</ul>
<p>(use the reference guide to find the functions)</p>
<p><em>Don‚Äôt forget to set a seed when you resample!</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="try-rsample" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="monte-carlo-cross-validation" class="slide level2">
<h2>Monte Carlo Cross-Validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">322</span>)</span>
<span id="cb52-2"><a href=""></a><span class="fu">mc_cv</span>(forested_train, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb52-3"><a href=""></a><span class="co">#&gt; # Monte Carlo cross-validation (0.75/0.25) with 10 resamples  </span></span>
<span id="cb52-4"><a href=""></a><span class="co">#&gt; # A tibble: 10 √ó 2</span></span>
<span id="cb52-5"><a href=""></a><span class="co">#&gt;    splits              id        </span></span>
<span id="cb52-6"><a href=""></a><span class="co">#&gt;    &lt;list&gt;              &lt;chr&gt;     </span></span>
<span id="cb52-7"><a href=""></a><span class="co">#&gt;  1 &lt;split [4263/1422]&gt; Resample01</span></span>
<span id="cb52-8"><a href=""></a><span class="co">#&gt;  2 &lt;split [4263/1422]&gt; Resample02</span></span>
<span id="cb52-9"><a href=""></a><span class="co">#&gt;  3 &lt;split [4263/1422]&gt; Resample03</span></span>
<span id="cb52-10"><a href=""></a><span class="co">#&gt;  4 &lt;split [4263/1422]&gt; Resample04</span></span>
<span id="cb52-11"><a href=""></a><span class="co">#&gt;  5 &lt;split [4263/1422]&gt; Resample05</span></span>
<span id="cb52-12"><a href=""></a><span class="co">#&gt;  6 &lt;split [4263/1422]&gt; Resample06</span></span>
<span id="cb52-13"><a href=""></a><span class="co">#&gt;  7 &lt;split [4263/1422]&gt; Resample07</span></span>
<span id="cb52-14"><a href=""></a><span class="co">#&gt;  8 &lt;split [4263/1422]&gt; Resample08</span></span>
<span id="cb52-15"><a href=""></a><span class="co">#&gt;  9 &lt;split [4263/1422]&gt; Resample09</span></span>
<span id="cb52-16"><a href=""></a><span class="co">#&gt; 10 &lt;split [4263/1422]&gt; Resample10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Repeated random sub-sampling validation: random train/test splits repeated many times. You have a lot of data and k-fold is too slow) You control: How much of the data goes to training vs testing? How many random splits you generate.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="validation-set" class="slide level2">
<h2>Validation set <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb53-2"><a href=""></a>forested_val_split <span class="ot">&lt;-</span> <span class="fu">initial_validation_split</span>(forested)</span>
<span id="cb53-3"><a href=""></a><span class="fu">validation_set</span>(forested_val_split)</span>
<span id="cb53-4"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 2</span></span>
<span id="cb53-5"><a href=""></a><span class="co">#&gt;   splits              id        </span></span>
<span id="cb53-6"><a href=""></a><span class="co">#&gt;   &lt;list&gt;              &lt;chr&gt;     </span></span>
<span id="cb53-7"><a href=""></a><span class="co">#&gt; 1 &lt;split [4264/1421]&gt; validation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>A validation set is just another type of resample</p>
<div class="footer">

</div>
<aside class="notes">
<p>creating a single train/validation split and extracting the validation data for evaluation This randomly splits your dataset forested into: Training set (default = 3/4 or 75% of the data) Validation set (default = 1/4 or 25% of the data) it‚Äôs similar to initial_split(), but intended specifically for validation workflows often used when you are holding out a validation set to tune models before testing on a final test set</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section></section>
<section id="decision-tree" class="title-slide slide level1 center">
<h1>Decision tree üå≥</h1>
<div class="footer">

</div>
</section>

<section>
<section id="random-forest" class="title-slide slide level1 center">
<h1>Random forest üå≥üå≤üå¥üåµüå¥üå≥üå≥üå¥üå≤üåµüå¥üå≤üå≥üå¥üå≥üåµüåµüå¥üå≤üå≤üå≥üå¥üå≥üå¥üå≤üå¥üåµüå¥üå≤üå¥üåµüå≤üåµüå¥üå≤üå≥üå¥üåµüå≥üå¥üå≥</h1>
<div class="footer">

</div>
</section>
<section id="random-forest-1" class="slide level2">
<h2>Random forest üå≥üå≤üå¥üåµüå≥üå≥üå¥üå≤üåµüå¥üå≥üåµ</h2>
<ul>
<li><p>Ensemble many decision tree models</p></li>
<li><p>All the trees vote! üó≥Ô∏è</p></li>
<li><p>Bootstrap aggregating + random predictor sampling</p></li>
</ul>
<div class="fragment">
<ul>
<li>Often works well without tuning hyperparameters (more on this later!), as long as there are enough trees</li>
</ul>
<div class="footer">

</div>
<aside class="notes">
<p>Bootstrap Aggregating (‚ÄúBagging‚Äù) - Bootstrap = Randomly sample your training data with replacement. - Aggregating = Build many trees on different bootstrapped samples and average (for regression) or vote (for classification).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="create-a-random-forest-model" class="slide level2">
<h2>Create a random forest model <img data-src="hexes/parsnip.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a>rf_spec <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(<span class="at">trees =</span> <span class="dv">1000</span>, <span class="at">mode =</span> <span class="st">"classification"</span>)</span>
<span id="cb54-2"><a href=""></a>rf_spec</span>
<span id="cb54-3"><a href=""></a><span class="co">#&gt; Random Forest Model Specification (classification)</span></span>
<span id="cb54-4"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb54-5"><a href=""></a><span class="co">#&gt; Main Arguments:</span></span>
<span id="cb54-6"><a href=""></a><span class="co">#&gt;   trees = 1000</span></span>
<span id="cb54-7"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb54-8"><a href=""></a><span class="co">#&gt; Computational engine: ranger</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="create-a-random-forest-model-1" class="slide level2">
<h2>Create a random forest model <img data-src="hexes/workflows.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>rf_wflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>(forested <span class="sc">~</span> ., rf_spec)</span>
<span id="cb55-2"><a href=""></a>rf_wflow</span>
<span id="cb55-3"><a href=""></a><span class="co">#&gt; ‚ïê‚ïê Workflow ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span id="cb55-4"><a href=""></a><span class="co">#&gt; Preprocessor: Formula</span></span>
<span id="cb55-5"><a href=""></a><span class="co">#&gt; Model: rand_forest()</span></span>
<span id="cb55-6"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb55-7"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb55-8"><a href=""></a><span class="co">#&gt; forested ~ .</span></span>
<span id="cb55-9"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb55-10"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb55-11"><a href=""></a><span class="co">#&gt; Random Forest Model Specification (classification)</span></span>
<span id="cb55-12"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb55-13"><a href=""></a><span class="co">#&gt; Main Arguments:</span></span>
<span id="cb55-14"><a href=""></a><span class="co">#&gt;   trees = 1000</span></span>
<span id="cb55-15"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb55-16"><a href=""></a><span class="co">#&gt; Computational engine: ranger</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="your-turn-13" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
<p><em>Use <code>fit_resamples()</code> and <code>rf_wflow</code> to:</em></p>
<ul>
<li><em>keep predictions</em></li>
<li><em>compute metrics</em></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="try-fit-resamples" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluating-model-performance-4" class="slide level2">
<h2>Evaluating model performance <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a>ctrl_forested <span class="ot">&lt;-</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-2"><a href=""></a></span>
<span id="cb56-3"><a href=""></a><span class="co"># Random forest uses random numbers so set the seed first</span></span>
<span id="cb56-4"><a href=""></a></span>
<span id="cb56-5"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb56-6"><a href=""></a>rf_res <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(rf_wflow, forested_folds, <span class="at">control =</span> ctrl_forested)</span>
<span id="cb56-7"><a href=""></a><span class="fu">collect_metrics</span>(rf_res)</span>
<span id="cb56-8"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 6</span></span>
<span id="cb56-9"><a href=""></a><span class="co">#&gt;   .metric     .estimator   mean     n std_err .config             </span></span>
<span id="cb56-10"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb56-11"><a href=""></a><span class="co">#&gt; 1 accuracy    binary     0.918     10 0.00585 Preprocessor1_Model1</span></span>
<span id="cb56-12"><a href=""></a><span class="co">#&gt; 2 brier_class binary     0.0618    10 0.00337 Preprocessor1_Model1</span></span>
<span id="cb56-13"><a href=""></a><span class="co">#&gt; 3 roc_auc     binary     0.972     10 0.00309 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="the-whole-game---status-update-3" class="slide level2">
<h2>The whole game - status update</h2>

<img data-src="images/whole-game-transparent-select.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section>
<section id="the-final-fit" class="slide level2">
<h2>The final fit <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>Suppose that we are happy with our random forest model.</p>
<p>Let‚Äôs fit the model on the training set and verify our performance using the test set.</p>
<div class="fragment">
<p>We‚Äôve seen <code>fit()</code> and <code>predict()</code> (+ <code>augment()</code>) but there is a shortcut:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="co"># forested_split has train + test info</span></span>
<span id="cb57-2"><a href=""></a>final_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(rf_wflow, forested_split) </span>
<span id="cb57-3"><a href=""></a></span>
<span id="cb57-4"><a href=""></a>final_fit</span>
<span id="cb57-5"><a href=""></a><span class="co">#&gt; # Resampling results</span></span>
<span id="cb57-6"><a href=""></a><span class="co">#&gt; # Manual resampling </span></span>
<span id="cb57-7"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 6</span></span>
<span id="cb57-8"><a href=""></a><span class="co">#&gt;   splits              id               .metrics .notes   .predictions .workflow </span></span>
<span id="cb57-9"><a href=""></a><span class="co">#&gt;   &lt;list&gt;              &lt;chr&gt;            &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    </span></span>
<span id="cb57-10"><a href=""></a><span class="co">#&gt; 1 &lt;split [5685/1422]&gt; train/test split &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</div>
</section>
<section id="what-is-in-final_fit" class="slide level2">
<h2>What is in <code>final_fit</code>? <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a><span class="fu">collect_metrics</span>(final_fit)</span>
<span id="cb58-2"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 4</span></span>
<span id="cb58-3"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate .config             </span></span>
<span id="cb58-4"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb58-5"><a href=""></a><span class="co">#&gt; 1 accuracy    binary        0.911  Preprocessor1_Model1</span></span>
<span id="cb58-6"><a href=""></a><span class="co">#&gt; 2 roc_auc     binary        0.970  Preprocessor1_Model1</span></span>
<span id="cb58-7"><a href=""></a><span class="co">#&gt; 3 brier_class binary        0.0652 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>These are metrics computed with the <strong>test</strong> set</p>
<div class="footer">

</div>
</div>
</section>
<section id="what-is-in-final_fit-1" class="slide level2">
<h2>What is in <code>final_fit</code>? <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="fu">collect_predictions</span>(final_fit)</span>
<span id="cb59-2"><a href=""></a><span class="co">#&gt; # A tibble: 1,422 √ó 7</span></span>
<span id="cb59-3"><a href=""></a><span class="co">#&gt;    .pred_class .pred_Yes .pred_No id                .row forested .config       </span></span>
<span id="cb59-4"><a href=""></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt; &lt;fct&gt;    &lt;chr&gt;         </span></span>
<span id="cb59-5"><a href=""></a><span class="co">#&gt;  1 Yes             0.822   0.178  train/test split     3 No       Preprocessor1‚Ä¶</span></span>
<span id="cb59-6"><a href=""></a><span class="co">#&gt;  2 Yes             0.707   0.293  train/test split     4 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-7"><a href=""></a><span class="co">#&gt;  3 No              0.270   0.730  train/test split     7 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-8"><a href=""></a><span class="co">#&gt;  4 Yes             0.568   0.432  train/test split     8 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-9"><a href=""></a><span class="co">#&gt;  5 Yes             0.554   0.446  train/test split    10 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-10"><a href=""></a><span class="co">#&gt;  6 Yes             0.970   0.0297 train/test split    11 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-11"><a href=""></a><span class="co">#&gt;  7 Yes             0.963   0.0367 train/test split    12 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-12"><a href=""></a><span class="co">#&gt;  8 Yes             0.947   0.0528 train/test split    14 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-13"><a href=""></a><span class="co">#&gt;  9 Yes             0.943   0.0573 train/test split    15 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-14"><a href=""></a><span class="co">#&gt; 10 Yes             0.977   0.0227 train/test split    19 Yes      Preprocessor1‚Ä¶</span></span>
<span id="cb59-15"><a href=""></a><span class="co">#&gt; # ‚Ñπ 1,412 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="what-is-in-final_fit-2" class="slide level2">
<h2>What is in <code>final_fit</code>? <img data-src="hexes/tune.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="fu">extract_workflow</span>(final_fit)</span>
<span id="cb60-2"><a href=""></a><span class="co">#&gt; ‚ïê‚ïê Workflow [trained] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span id="cb60-3"><a href=""></a><span class="co">#&gt; Preprocessor: Formula</span></span>
<span id="cb60-4"><a href=""></a><span class="co">#&gt; Model: rand_forest()</span></span>
<span id="cb60-5"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb60-6"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb60-7"><a href=""></a><span class="co">#&gt; forested ~ .</span></span>
<span id="cb60-8"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb60-9"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb60-10"><a href=""></a><span class="co">#&gt; Ranger result</span></span>
<span id="cb60-11"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb60-12"><a href=""></a><span class="co">#&gt; Call:</span></span>
<span id="cb60-13"><a href=""></a><span class="co">#&gt;  ranger::ranger(x = maybe_data_frame(x), y = y, num.trees = ~1000,      num.threads = 1, verbose = FALSE, seed = sample.int(10^5,          1), probability = TRUE) </span></span>
<span id="cb60-14"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb60-15"><a href=""></a><span class="co">#&gt; Type:                             Probability estimation </span></span>
<span id="cb60-16"><a href=""></a><span class="co">#&gt; Number of trees:                  1000 </span></span>
<span id="cb60-17"><a href=""></a><span class="co">#&gt; Sample size:                      5685 </span></span>
<span id="cb60-18"><a href=""></a><span class="co">#&gt; Number of independent variables:  18 </span></span>
<span id="cb60-19"><a href=""></a><span class="co">#&gt; Mtry:                             4 </span></span>
<span id="cb60-20"><a href=""></a><span class="co">#&gt; Target node size:                 10 </span></span>
<span id="cb60-21"><a href=""></a><span class="co">#&gt; Variable importance mode:         none </span></span>
<span id="cb60-22"><a href=""></a><span class="co">#&gt; Splitrule:                        gini </span></span>
<span id="cb60-23"><a href=""></a><span class="co">#&gt; OOB prediction error (Brier s.):  0.06153207</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Use this for <strong>prediction</strong> on new data, like for deploying</p>
<div class="footer">

</div>
<aside class="notes">
<p>Pulls out the trained workflow from final_fit. - This workflow includes: - The preprocessing recipe (if any) - The trained model (your random forest) 0 Any settings or structure you built inside rf_wflow This is useful because after last_fit(), you often want to save, inspect, or refit the trained model without re-training everything.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="the-whole-game" class="slide level2">
<h2>The whole game</h2>

<img data-src="images/whole-game-final-performance.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"><div class="footer">

</div>
</section></section>
<section id="tuning-models" class="title-slide slide level1 center">
<h1>Tuning Models</h1>
<div class="footer">

</div>
</section>

<section>
<section id="open-worksheet-4" class="title-slide slide level1 center">
<h1>Open Worksheet 4 üìÑ</h1>
<div class="footer">

</div>
</section>
<section id="tuning-parameters" class="slide level2">
<h2>Tuning parameters</h2>
<p>Some model or preprocessing parameters cannot be estimated directly from the data.</p>
<div class="fragment">
<p>Some examples:</p>
<ul>
<li>Tree depth in decision trees</li>
<li>Number of neighbors in a K-nearest neighbor model</li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="optimize-tuning-parameters" class="slide level2">
<h2>Optimize tuning parameters</h2>
<ul>
<li>Try different values and measure their performance.</li>
</ul>
<div class="fragment">
<ul>
<li>Find good values for these parameters.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Once the value(s) of the parameter(s) are determined, a model can be finalized by fitting the model to the entire training set.</li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="optimize-tuning-parameters-1" class="slide level2">
<h2>Optimize tuning parameters</h2>
<p>The main two strategies for optimization are:</p>
<div class="fragment">
<ul>
<li><p><strong>Grid search</strong> üí† which tests a pre-defined set of candidate values</p></li>
<li><p><strong>Iterative search</strong> üåÄ which suggests/estimates new values of candidate parameters to evaluate</p></li>
</ul>
<div class="footer">

</div>
</div>
</section>
<section id="specifying-tuning-parameters" class="slide level2">
<h2>Specifying tuning parameters</h2>
<p>Let‚Äôs take our previous random forest workflow and tag for tuning the minimum number of data points in each node:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61" data-code-line-numbers="1|"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a>rf_spec <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(<span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb61-3"><a href=""></a></span>
<span id="cb61-4"><a href=""></a>rf_wflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>(forested <span class="sc">~</span> ., rf_spec)</span>
<span id="cb61-5"><a href=""></a>rf_wflow</span>
<span id="cb61-6"><a href=""></a><span class="co">#&gt; ‚ïê‚ïê Workflow ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span id="cb61-7"><a href=""></a><span class="co">#&gt; Preprocessor: Formula</span></span>
<span id="cb61-8"><a href=""></a><span class="co">#&gt; Model: rand_forest()</span></span>
<span id="cb61-9"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb61-10"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb61-11"><a href=""></a><span class="co">#&gt; forested ~ .</span></span>
<span id="cb61-12"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb61-13"><a href=""></a><span class="co">#&gt; ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span id="cb61-14"><a href=""></a><span class="co">#&gt; Random Forest Model Specification (classification)</span></span>
<span id="cb61-15"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb61-16"><a href=""></a><span class="co">#&gt; Main Arguments:</span></span>
<span id="cb61-17"><a href=""></a><span class="co">#&gt;   min_n = tune()</span></span>
<span id="cb61-18"><a href=""></a><span class="co">#&gt; </span></span>
<span id="cb61-19"><a href=""></a><span class="co">#&gt; Computational engine: ranger</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
<aside class="notes">
<p>So you are telling tidymodels: ‚ÄúDon‚Äôt fix min_n (the minimum number of observations needed to make a split at a node) yet, treat it as a hyperparameter that I want to search for the best value during tuning.‚Äù min_n controls how deep or complex the trees can grow: - Smaller min_n ‚Üí deeper trees ‚Üí more complex models (potential overfitting) - Larger min_n ‚Üí shallower trees ‚Üí simpler models (maybe underfitting) - It‚Äôs a form of tree regularization. During hyperparameter tuning, tidymodels will try different values of min_n (like 2, 5, 10, 20, etc.) across resampling (like cross-validation). It chooses the best value based on performance (accuracy, ROC AUC, etc.).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="try-out-multiple-values" class="slide level2">
<h2>Try out multiple values</h2>
<p><code>tune_grid()</code> works similar to <code>fit_resamples()</code> but covers multiple parameter values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62" data-code-line-numbers="2|3-4|5|"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">22</span>)</span>
<span id="cb62-2"><a href=""></a>rf_res <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb62-3"><a href=""></a>  rf_wflow,</span>
<span id="cb62-4"><a href=""></a>  forested_folds,</span>
<span id="cb62-5"><a href=""></a>  <span class="at">grid =</span> <span class="dv">5</span></span>
<span id="cb62-6"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>you‚Äôre saying: use cross-validation to search for the best value of the tuning parameters. rf_wflow is your workflow that includes: - a random forest model - and a formula (like forested ~ .) forested_folds are your validation folds (cross-validation plan).<br>
grid = 5 means: ‚ÄúTry 5 different values‚Äù for each tunable parameter</p>
<p>It will generate 5 different random values for min_n (because you set min_n = tune() earlier). - For each value: - Train models across all the folds - Evaluate performance (accuracy, ROC AUC, or other default metrics) - Save all results in rf_res. For each of the 5 grid points (i.e., each different min_n value): - Fit the model on 9 folds - Validate the model on 1 fold - Repeat for all folds - Aggregate performance metrics - Rank which min_n value worked best</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="compare-results" class="slide level2">
<h2>Compare results</h2>
<p>Inspecting results and selecting the best-performing hyperparameter(s):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a><span class="fu">show_best</span>(rf_res)</span>
<span id="cb63-2"><a href=""></a><span class="co">#&gt; # A tibble: 5 √ó 7</span></span>
<span id="cb63-3"><a href=""></a><span class="co">#&gt;   min_n .metric .estimator  mean     n std_err .config             </span></span>
<span id="cb63-4"><a href=""></a><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb63-5"><a href=""></a><span class="co">#&gt; 1    31 roc_auc binary     0.972    10 0.00304 Preprocessor1_Model2</span></span>
<span id="cb63-6"><a href=""></a><span class="co">#&gt; 2    12 roc_auc binary     0.972    10 0.00317 Preprocessor1_Model4</span></span>
<span id="cb63-7"><a href=""></a><span class="co">#&gt; 3    22 roc_auc binary     0.972    10 0.00313 Preprocessor1_Model5</span></span>
<span id="cb63-8"><a href=""></a><span class="co">#&gt; 4    40 roc_auc binary     0.972    10 0.00303 Preprocessor1_Model1</span></span>
<span id="cb63-9"><a href=""></a><span class="co">#&gt; 5     3 roc_auc binary     0.971    10 0.00306 Preprocessor1_Model3</span></span>
<span id="cb63-10"><a href=""></a></span>
<span id="cb63-11"><a href=""></a>best_parameter <span class="ot">&lt;-</span> <span class="fu">select_best</span>(rf_res)</span>
<span id="cb63-12"><a href=""></a>best_parameter</span>
<span id="cb63-13"><a href=""></a><span class="co">#&gt; # A tibble: 1 √ó 2</span></span>
<span id="cb63-14"><a href=""></a><span class="co">#&gt;   min_n .config             </span></span>
<span id="cb63-15"><a href=""></a><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;               </span></span>
<span id="cb63-16"><a href=""></a><span class="co">#&gt; 1    31 Preprocessor1_Model2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>collect_metrics()</code> and <code>autoplot()</code> are also available.</p>
<aside class="notes">
<p>rf_res is the result of your tune_grid() ‚Äî meaning: - It contains the performance results for each tuning parameter value tried (in your case, for different min_n values). - show_best(rf_res):</p>
<p>Displays the top-performing tuning results ‚Äî ranked by your default or chosen metric (usually highest accuracy or ROC AUC).</p>
<p>select_best(rf_res) picks the best hyperparameter values found during tuning, so you can finalize and refit your model properly for deployment or final evaluation.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer">

</div>
</section>
<section id="the-final-fit-1" class="slide level2">
<h2>The final fit</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a>rf_wflow <span class="ot">&lt;-</span> <span class="fu">finalize_workflow</span>(rf_wflow, best_parameter)</span>
<span id="cb64-2"><a href=""></a></span>
<span id="cb64-3"><a href=""></a>final_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(rf_wflow, forested_split) </span>
<span id="cb64-4"><a href=""></a></span>
<span id="cb64-5"><a href=""></a><span class="fu">collect_metrics</span>(final_fit)</span>
<span id="cb64-6"><a href=""></a><span class="co">#&gt; # A tibble: 3 √ó 4</span></span>
<span id="cb64-7"><a href=""></a><span class="co">#&gt;   .metric     .estimator .estimate .config             </span></span>
<span id="cb64-8"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               </span></span>
<span id="cb64-9"><a href=""></a><span class="co">#&gt; 1 accuracy    binary        0.909  Preprocessor1_Model1</span></span>
<span id="cb64-10"><a href=""></a><span class="co">#&gt; 2 roc_auc     binary        0.970  Preprocessor1_Model1</span></span>
<span id="cb64-11"><a href=""></a><span class="co">#&gt; 3 brier_class binary        0.0659 Preprocessor1_Model1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
<aside class="notes">
<p>The ‚Å†finalize_*‚Å† functions take a list or tibble of tuning parameter values and update objects with those values.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="your-turn-14" class="slide level2" data-transition="slide-in">
<h2>Your turn</h2>
<p><em>Modify your model workflow to tune one or more parameters.</em></p>
<p><em>Use grid search to find the best parameter(s).</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="tune-grid" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="footer">

</div>
<p><img data-src="images/parsnip-flagger.jpg" class="absolute" style="top: 0px; right: 0px; width: 150px; height: 150px; "></p>
</section>
<section id="how-can-we-compare-multiple-model-workflows-at-once" class="slide level2">
<h2>How can we compare multiple model workflows at once?</h2>

<img data-src="images/forest_mountain.svg" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">

</div>
</section>
<section id="evaluate-a-workflow-set" class="slide level2">
<h2>Evaluate a workflow set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a>wf_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(<span class="fu">list</span>(forested <span class="sc">~</span> .), <span class="fu">list</span>(tree_spec, rf_spec))</span>
<span id="cb65-2"><a href=""></a>wf_set</span>
<span id="cb65-3"><a href=""></a><span class="co">#&gt; # A workflow set/tibble: 2 √ó 4</span></span>
<span id="cb65-4"><a href=""></a><span class="co">#&gt;   wflow_id              info             option    result    </span></span>
<span id="cb65-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    </span></span>
<span id="cb65-6"><a href=""></a><span class="co">#&gt; 1 formula_decision_tree &lt;tibble [1 √ó 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span></span>
<span id="cb65-7"><a href=""></a><span class="co">#&gt; 2 formula_rand_forest   &lt;tibble [1 √ó 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluate-a-workflow-set-1" class="slide level2">
<h2>Evaluate a workflow set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a>wf_set_fit <span class="ot">&lt;-</span> wf_set <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href=""></a>  <span class="fu">workflow_map</span>(<span class="st">"fit_resamples"</span>, <span class="at">resamples =</span> forested_folds)</span>
<span id="cb66-3"><a href=""></a>wf_set_fit</span>
<span id="cb66-4"><a href=""></a><span class="co">#&gt; # A workflow set/tibble: 2 √ó 4</span></span>
<span id="cb66-5"><a href=""></a><span class="co">#&gt;   wflow_id              info             option    result   </span></span>
<span id="cb66-6"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;                 &lt;list&gt;           &lt;list&gt;    &lt;list&gt;   </span></span>
<span id="cb66-7"><a href=""></a><span class="co">#&gt; 1 formula_decision_tree &lt;tibble [1 √ó 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span></span>
<span id="cb66-8"><a href=""></a><span class="co">#&gt; 2 formula_rand_forest   &lt;tibble [1 √ó 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">

</div>
</section>
<section id="evaluate-a-workflow-set-2" class="slide level2">
<h2>Evaluate a workflow set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a>wf_set_fit <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href=""></a>  <span class="fu">rank_results</span>()</span>
<span id="cb67-3"><a href=""></a><span class="co">#&gt; # A tibble: 6 √ó 9</span></span>
<span id="cb67-4"><a href=""></a><span class="co">#&gt;   wflow_id         .config .metric   mean std_err     n preprocessor model  rank</span></span>
<span id="cb67-5"><a href=""></a><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb67-6"><a href=""></a><span class="co">#&gt; 1 formula_rand_fo‚Ä¶ Prepro‚Ä¶ accura‚Ä¶ 0.919  0.00525    10 formula      rand‚Ä¶     1</span></span>
<span id="cb67-7"><a href=""></a><span class="co">#&gt; 2 formula_rand_fo‚Ä¶ Prepro‚Ä¶ brier_‚Ä¶ 0.0617 0.00338    10 formula      rand‚Ä¶     1</span></span>
<span id="cb67-8"><a href=""></a><span class="co">#&gt; 3 formula_rand_fo‚Ä¶ Prepro‚Ä¶ roc_auc 0.972  0.00310    10 formula      rand‚Ä¶     1</span></span>
<span id="cb67-9"><a href=""></a><span class="co">#&gt; 4 formula_decisio‚Ä¶ Prepro‚Ä¶ accura‚Ä¶ 0.894  0.00562    10 formula      deci‚Ä¶     2</span></span>
<span id="cb67-10"><a href=""></a><span class="co">#&gt; 5 formula_decisio‚Ä¶ Prepro‚Ä¶ brier_‚Ä¶ 0.0817 0.00434    10 formula      deci‚Ä¶     2</span></span>
<span id="cb67-11"><a href=""></a><span class="co">#&gt; 6 formula_decisio‚Ä¶ Prepro‚Ä¶ roc_auc 0.951  0.00378    10 formula      deci‚Ä¶     2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first metric of the metric set is used for ranking. Use <code>rank_metric</code> to change that.</p>
<div class="fragment">
<p>Lots more available with workflow sets, like <code>collect_metrics()</code>, <code>autoplot()</code> methods, and more!</p>
<div class="footer">

</div>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>inspired and adapted from <a href="https://tidymodels.org" class="uri">https://tidymodels.org</a> and <a href="https://workshops.tidymodels.org" class="uri">https://workshops.tidymodels.org</a></p>
</div>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="part-I_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="part-I_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="part-I_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="part-I_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>